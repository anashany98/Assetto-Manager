<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telemetry Map - Assetto Manager TV</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'JetBrains Mono', monospace;
            background-color: #0b0b0b;
            color: white;
            overflow: hidden;
        }

        .track-path {
            fill: none;
            stroke: #333;
            stroke-width: 20;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .track-sector-1 {
            stroke: #333;
        }

        .car-dot {
            fill: #3b82f6;
            /* Blue */
            filter: drop-shadow(0 0 8px #3b82f6);
            transition: all 0.1s linear;
        }

        .car-dot.leader {
            fill: #eab308;
            /* Yellow */
            filter: drop-shadow(0 0 10px #eab308);
            r: 10;
        }

        .graph-container {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #333;
        }
    </style>
</head>

<body class="flex h-screen">

    <!-- Sidebar: Driver List -->
    <div class="w-80 border-r border-white/10 bg-[#111] p-6 flex flex-col gap-4 z-20">
        <h2 class="text-xl font-bold uppercase text-gray-400 mb-4">Drivers</h2>

        <div class="flex items-center gap-4 p-3 rounded bg-blue-900/20 border-l-4 border-blue-500">
            <span class="text-xl font-bold">44</span>
            <div>
                <div class="font-bold">HAMILTON</div>
                <div class="text-xs text-gray-400">Mercedes AMG</div>
            </div>
            <div class="ml-auto text-green-400 font-bold">-0.240</div>
        </div>

        <div class="flex items-center gap-4 p-3 rounded bg-white/5 border-l-4 border-yellow-500">
            <span class="text-xl font-bold">1</span>
            <div>
                <div class="font-bold">VERSTAPPEN</div>
                <div class="text-xs text-gray-400">Red Bull</div>
            </div>
            <div class="ml-auto text-yellow-400 font-bold">P1</div>
        </div>

        <div class="flex items-center gap-4 p-3 rounded bg-white/5 opacity-50">
            <span class="text-xl font-bold">16</span>
            <div>
                <div class="font-bold">LECLERC</div>
                <div class="text-xs text-gray-400">Ferrari</div>
            </div>
            <div class="ml-auto">+1.2s</div>
        </div>

        <!-- Footer Link -->
        <div class="mt-auto">
            <a href="index.html"
                class="block w-full py-3 bg-white/10 text-center rounded text-sm font-bold hover:bg-white/20 transition-colors">
                VOLVER
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 relative bg-black">

        <!-- SVG Map (Abstract Layout) -->
        <div class="absolute inset-0 flex items-center justify-center p-20">
            <svg viewBox="0 0 800 600" class="w-full h-full">
                <!-- Track Path (Simple Loop) -->
                <path id="track"
                    d="M 100 300 C 100 100, 300 100, 400 100 C 500 100, 700 100, 700 300 C 700 500, 500 500, 400 500 C 300 500, 100 500, 100 300 z"
                    class="track-path" stroke="#222" />

                <!-- Moving Cars -->
                <circle r="8" class="car-dot leader" id="car1">
                    <animateMotion dur="6s" repeatCount="indefinite" rotate="auto">
                        <mpath href="#track" />
                    </animateMotion>
                </circle>

                <circle r="8" class="car-dot" id="car2" fill="#ef4444" style="filter: drop-shadow(0 0 8px #ef4444);">
                    <animateMotion dur="6.1s" repeatCount="indefinite" rotate="auto" begin="0.5s">
                        <mpath href="#track" />
                    </animateMotion>
                </circle>

                <circle r="8" class="car-dot" id="car3" fill="#22c55e" style="filter: drop-shadow(0 0 8px #22c55e);">
                    <animateMotion dur="6.2s" repeatCount="indefinite" rotate="auto" begin="1.2s">
                        <mpath href="#track" />
                    </animateMotion>
                </circle>
            </svg>
        </div>

        <!-- Telemetry Graphs Overlay -->
        <div class="absolute bottom-10 right-10 w-[500px] h-[200px] graph-container rounded-xl p-4">
            <div class="flex justify-between text-xs text-gray-400 mb-2">
                <span>THROTTLE / BRAKE</span>
                <span>LIVE DATA</span>
            </div>
            <canvas id="telemetryChart"></canvas>
        </div>

    </div>

    <script>
        const ctx = document.getElementById('telemetryChart').getContext('2d');

        // Initial Data
        const labels = Array(50).fill('');
        const throttleData = Array(50).fill(0);
        const brakeData = Array(50).fill(0);

        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Throttle',
                    data: throttleData,
                    borderColor: '#22c55e',
                    borderWidth: 2,
                    fill: false,
                    pointRadius: 0,
                    tension: 0.1
                }, {
                    label: 'Brake',
                    data: brakeData,
                    borderColor: '#ef4444',
                    borderWidth: 2,
                    fill: false,
                    pointRadius: 0,
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: false,
                scales: {
                    x: { display: false },
                    y: {
                        min: 0,
                        max: 100,
                        grid: { color: '#333' }
                    }
                },
                plugins: { legend: { display: false } }
            }
        });

        // Simulate Telemetry
        let speed = 0;
        setInterval(() => {
            // Fake logic: if speed is high, brake sometimes. if low, throttle.
            const r = Math.random();
            let newThrottle = 100;
            let newBrake = 0;

            if (r > 0.7) { // Corner
                newThrottle = 0;
                newBrake = Math.random() * 100;
            } else if (r > 0.9) { // Coast
                newThrottle = 0;
                newBrake = 0;
            }

            // Smooth updates
            throttleData.push(newThrottle);
            throttleData.shift();
            brakeData.push(newBrake);
            brakeData.shift();

            chart.update();
        }, 100);
    </script>
</body>

</html>