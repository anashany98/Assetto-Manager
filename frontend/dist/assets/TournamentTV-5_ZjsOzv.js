import{n as m,u as d,r as b,j as e,T as x,U as g,a as u,A as f}from"./index-MjGtIaAt.js";import{c as i}from"./utils-BykweIWy.js";import{T as j}from"./triangle-alert-ko4KflD0.js";import"./clsx-B-dksMZM.js";function T(){const{id:r}=m(),a=parseInt(r||"0"),{data:n,isLoading:p,error:y}=d({queryKey:["event",a],queryFn:async()=>(await u.get(`${f}/events/${a}`)).data}),{data:l}=d({queryKey:["bracket",a],queryFn:async()=>(await u.get(`${f}/tournaments/${a}/bracket`)).data,enabled:!!n,refetchInterval:5e3}),s=b.useMemo(()=>{if(l&&"rounds"in l)return l;if(l&&"status"in l)return null;if(n?.rules)try{const t=JSON.parse(n.rules);if(t.bracket)return t.bracket}catch{}return null},[l,n]);return p?e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white",children:[e.jsx("div",{className:"w-16 h-16 border-8 border-yellow-500/20 border-t-yellow-500 rounded-full animate-spin mb-6"}),e.jsx("h2",{className:"text-4xl font-black italic uppercase tracking-widest animate-pulse",children:"Cargando Torneo..."})]}):y||!n?e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-red-500",children:[e.jsx(j,{size:64,className:"mb-4 opacity-50"}),e.jsx("h2",{className:"text-2xl font-black uppercase tracking-widest text-center",children:"Torneo no disponible"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-8 pb-4 flex justify-between items-end border-b border-gray-800 bg-gray-900/50 backdrop-blur-md z-10",children:[e.jsxs("div",{children:[e.jsx("span",{className:"bg-red-600 px-3 py-1 rounded text-xs font-black uppercase tracking-widest shadow-lg shadow-red-600/20",children:"En Vivo"}),e.jsxs("h1",{className:"text-5xl font-black italic uppercase tracking-tighter mt-2 flex items-center gap-4",children:[e.jsx(x,{className:"text-yellow-500",size:48}),n.name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-widest text-sm",children:"Torneo Eliminatorio"}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 text-gray-500 text-xs font-mono mt-1",children:[e.jsx(g,{size:12}),e.jsxs("span",{children:[s?.rounds?.[0]?.length?s.rounds[0].length*2:0," Participantes"]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden p-8 flex items-center justify-center",children:!s||!Array.isArray(s.rounds)?e.jsxs("div",{className:"flex flex-col items-center justify-center opacity-50",children:[e.jsx(x,{size:64,className:"mb-4 text-gray-700"}),e.jsx("h2",{className:"text-2xl font-black text-gray-600 uppercase",children:"Esperando Sorteo"}),e.jsx("p",{className:"text-gray-500",children:"El cuadro del torneo a√∫n no ha sido generado"})]}):e.jsx("div",{className:"flex space-x-12 h-full items-center",children:Array.isArray(s.rounds)&&s.rounds.map((t,o)=>e.jsxs("div",{className:"flex flex-col justify-around h-full space-y-4 min-w-[280px]",children:[e.jsx("div",{className:"text-center font-black uppercase text-gray-600 text-sm tracking-[0.2em] mb-4",children:w(o,s.rounds.length)}),e.jsx("div",{className:"flex flex-col justify-around flex-1 relative",children:Array.isArray(t)&&t.map(c=>e.jsx(h,{match:c,isFinal:o===s.rounds.length-1},c.id))})]},o))})}),e.jsx("div",{className:"h-12 bg-blue-600 flex items-center px-4 overflow-hidden whitespace-nowrap",children:e.jsxs("div",{className:"animate-marquee text-white font-black uppercase tracking-widest text-lg",children:["üèÜ Torneo en curso ‚Ä¢ Pilotos prepararse en simuladores ",s?.rounds?.[0]?.[0]?`‚Ä¢ Siguiente carrera: ${s.rounds[0][0].player1||"TBA"} vs ${s.rounds[0][0].player2||"TBA"}`:""," ‚Ä¢"]})})]})}function h({match:r,isFinal:a}){return e.jsxs("div",{className:i("relative bg-gray-900 border-2 rounded-xl overflow-hidden transition-all duration-500 w-full",r.winner?"border-green-500/50":"border-gray-700",a&&"border-yellow-500 scale-110 shadow-2xl shadow-yellow-500/20"),children:[e.jsxs("div",{className:i("p-3 flex justify-between items-center border-b border-gray-800",r.winner===r.player1&&r.player1?"bg-green-500/20":""),children:[e.jsx("span",{className:i("font-bold truncate",r.winner===r.player1&&r.player1?"text-white":"text-gray-400"),children:r.player1||"TBD"}),r.score1!==void 0&&e.jsx("span",{className:"font-mono font-black",children:r.score1})]}),e.jsxs("div",{className:i("p-3 flex justify-between items-center",r.winner===r.player2&&r.player2?"bg-green-500/20":""),children:[e.jsx("span",{className:i("font-bold truncate",r.winner===r.player2&&r.player2?"text-white":"text-gray-400"),children:r.player2||"TBD"}),r.score2!==void 0&&e.jsx("span",{className:"font-mono font-black",children:r.score2})]})]})}function w(r,a){return r===a-1?"GRAN FINAL":r===a-2?"SEMIFINALES":r===a-3?"CUARTOS":`RONDA ${r+1}`}export{T as default};
