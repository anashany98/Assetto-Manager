import{r as o,u as j,j as e,T as S,U as $,k as V,a as z,A as L}from"./index-MjGtIaAt.js";import{m as G,g as H}from"./stations-BBBEE_Ei.js";import{c as t}from"./utils-BykweIWy.js";import{m as b}from"./proxy-CbfoYm00.js";import{R as I,C as Q}from"./rocket-C4zol-4Y.js";import{X}from"./x-CyrpJdpA.js";import{A as B}from"./index-FSCaKcAl.js";import{A as M}from"./activity-d8XIJMYL.js";import{C as A}from"./car-Bto1fEN0.js";import{M as _}from"./map-BRdv7LqT.js";import{L as J}from"./loader-circle-DSpMC2cv.js";function ne({onClose:l,initialCar:c,initialTrack:x,initialMode:u,initialDuration:R,initialLaps:T,forcedEventId:O}){const[s,N]=o.useState(1),[r,w]=o.useState(u||"practice"),[m,U]=o.useState(c||""),[g,q]=o.useState(x||""),[n,k]=o.useState([]),[h,C]=o.useState(!1),{data:F}=j({queryKey:["mods","car"],queryFn:async()=>(await z.get(`${L}/mods?type=car`)).data}),{data:D}=j({queryKey:["mods","track"],queryFn:async()=>(await z.get(`${L}/mods?type=track`)).data}),{data:p}=j({queryKey:["stations"],queryFn:H}),d=Array.isArray(p)?p.filter(a=>a.is_online):[],E=async()=>{C(!0);try{await G({station_ids:n,car:m,track:g,mode:r,duration_minutes:R||15,laps:T||5,name:`Lanzamiento Masivo ${new Date().toLocaleTimeString()}`,event_id:O}),alert("¡Lanzamiento completado con éxito!"),l()}catch(a){console.error(a),alert("Error al realizar el lanzamiento masivo")}finally{C(!1)}},P=m!==""&&g!=="",K=n.length>0;return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:e.jsxs(b.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"bg-gray-900 border border-gray-800 w-full max-w-4xl max-h-[90vh] rounded-[2.5rem] overflow-hidden flex flex-col shadow-2xl shadow-blue-500/10",children:[e.jsxs("div",{className:"p-8 border-b border-gray-800 flex justify-between items-center bg-gray-950/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-2xl shadow-lg shadow-blue-600/20",children:e.jsx(I,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white uppercase italic tracking-tighter",children:"Lanzamiento Masivo"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("span",{className:t("text-[10px] font-black px-2 py-0.5 rounded-full uppercase tracking-widest",r==="practice"?"bg-blue-500/10 text-blue-400":"bg-red-500/10 text-red-400"),children:["Modo: ",r==="practice"?"Práctica Individual":"Carrera Multiplayer"]})})]})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-800 rounded-xl transition-colors",children:e.jsx(X,{className:"text-gray-500 hover:text-white",size:24})})]}),e.jsxs("div",{className:"px-8 py-4 bg-gray-900/50 flex items-center justify-center gap-4 border-b border-gray-800",children:[e.jsx(f,{active:s===1,completed:s>1,label:"Contenido"}),e.jsx("div",{className:"w-8 h-px bg-gray-800"}),e.jsx(f,{active:s===2,completed:s>2,label:"Simuladores"}),e.jsx("div",{className:"w-8 h-px bg-gray-800"}),e.jsx(f,{active:s===3,completed:!1,label:"Confirmar"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsxs(B,{mode:"wait",children:[s===1&&e.jsxs(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>w("practice"),className:t("flex flex-col items-center gap-4 p-6 rounded-3xl border-2 transition-all",r==="practice"?"bg-blue-600/10 border-blue-500 text-white":"bg-gray-800/50 border-transparent text-gray-500 hover:bg-gray-800"),children:[e.jsx(M,{size:32}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold uppercase tracking-widest text-xs",children:"Modo Práctica"}),e.jsx("div",{className:"text-[10px] opacity-60",children:"Sesiones individuales simultáneas"})]})]}),e.jsxs("button",{onClick:()=>w("race"),className:t("flex flex-col items-center gap-4 p-6 rounded-3xl border-2 transition-all",r==="race"?"bg-red-600/10 border-red-500 text-white":"bg-gray-800/50 border-transparent text-gray-500 hover:bg-gray-800"),children:[e.jsx(S,{size:32}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold uppercase tracking-widest text-xs",children:"Modo Carrera"}),e.jsx("div",{className:"text-[10px] opacity-60",children:"Lobby multijugador automático"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-xs font-black text-gray-500 uppercase tracking-[0.2em] pl-2 flex items-center gap-2",children:[e.jsx(A,{size:14})," Seleccionar Vehículo"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:F?.map(a=>e.jsxs("button",{onClick:()=>U(a.name),className:t("flex items-center gap-3 p-3 rounded-2xl border transition-all text-left",m===a.name?"bg-blue-600 border-blue-400 text-white shadow-lg":"bg-gray-800/50 border-transparent text-gray-400 hover:bg-gray-800"),children:[e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-xl overflow-hidden flex-shrink-0",children:e.jsx("img",{src:a.image_url,alt:"",className:"w-full h-full object-cover opacity-80"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm leading-tight",children:a.name}),e.jsx("div",{className:"text-[10px] opacity-60",children:a.brand})]})]},a.id))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-xs font-black text-gray-500 uppercase tracking-[0.2em] pl-2 flex items-center gap-2",children:[e.jsx(_,{size:14})," Seleccionar Circuito"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:D?.map(a=>e.jsxs("button",{onClick:()=>q(a.name),className:t("flex items-center gap-3 p-3 rounded-2xl border transition-all text-left",g===a.name?"bg-blue-600 border-blue-400 text-white shadow-lg":"bg-gray-800/50 border-transparent text-gray-400 hover:bg-gray-800"),children:[e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-xl overflow-hidden flex-shrink-0",children:e.jsx("img",{src:a.image_url,alt:"",className:"w-full h-full object-cover opacity-80"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm leading-tight",children:a.name}),e.jsx("div",{className:"text-[10px] opacity-60",children:"Layout Original"})]})]},a.id))})]})]})]},"step1"),s===2&&e.jsxs(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white uppercase flex items-center gap-3",children:[e.jsx($,{className:"text-blue-500"})," Simuladores Online (",d.length,")"]}),e.jsx("button",{onClick:()=>k(a=>a.length===d.length?[]:d.map(i=>i.id)),className:"text-xs font-black text-blue-400 hover:text-blue-300 uppercase tracking-widest transition-colors",children:n.length===d.length?"Desmarcar Todos":"Seleccionar Todos"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(a=>e.jsxs("button",{onClick:()=>k(i=>i.includes(a.id)?i.filter(y=>y!==a.id):[...i,a.id]),className:t("p-4 rounded-2xl border transition-all text-left flex items-center justify-between",n.includes(a.id)?"bg-blue-600/10 border-blue-500 shadow-lg shadow-blue-500/5 text-white":"bg-gray-800/50 border-gray-700 text-gray-500 hover:border-gray-500"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:t("w-2 h-2 rounded-full",a.is_online?"bg-green-500 animate-pulse":"bg-red-500")}),e.jsx("span",{className:"font-bold",children:a.name})]}),n.includes(a.id)&&e.jsx(Q,{size:16,className:"text-blue-500"})]},a.id))}),d.length===0&&e.jsx("div",{className:"p-8 text-center bg-gray-800/50 rounded-3xl border border-dashed border-gray-700",children:e.jsx("p",{className:"text-gray-500 font-bold uppercase tracking-widest",children:"No hay estaciones online actualmente"})})]},"step2"),s===3&&e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center p-8 space-y-12",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h3",{className:"text-3xl font-black text-white uppercase italic tracking-tighter",children:"Resumen de Lanzamiento"}),e.jsx("p",{className:"text-gray-400",children:"Todo está listo para el despegue."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 w-full",children:[e.jsx(v,{icon:r==="practice"?M:S,label:"MODO",value:r.toUpperCase(),color:r==="practice"?"blue":"red"}),e.jsx(v,{icon:A,label:"VEHÍCULO",value:m,color:"blue"}),e.jsx(v,{icon:_,label:"CIRCUITO",value:g,color:"blue"})]}),e.jsxs("div",{className:"bg-blue-600/10 border border-blue-500/20 p-6 rounded-3xl w-full text-center",children:[e.jsx("div",{className:"text-xs font-black text-blue-400 uppercase tracking-[0.3em] mb-2",children:"Simuladores Seleccionados"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:n.map(a=>{const i=Array.isArray(p)?p.find(y=>y.id===a)?.name:"Unknown";return e.jsx("span",{className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-[10px] font-black",children:i},a)})})]})]},"step3")]})}),e.jsxs("div",{className:"p-8 border-t border-gray-800 bg-gray-950/50 flex justify-between items-center",children:[e.jsx("button",{disabled:s===1||h,onClick:()=>N(a=>a-1),className:"px-6 py-3 text-gray-500 hover:text-white font-bold uppercase tracking-widest disabled:opacity-0 transition-all",children:"Atrás"}),s<3?e.jsxs("button",{disabled:s===1&&!P||s===2&&!K,onClick:()=>N(a=>a+1),className:"bg-blue-600 hover:bg-blue-500 disabled:opacity-30 disabled:grayscale text-white px-8 py-3 rounded-xl font-black uppercase tracking-widest transition-all flex items-center gap-2",children:["Siguiente ",e.jsx(V,{size:18})]}):e.jsx("button",{disabled:h,onClick:E,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 disabled:opacity-50 text-white px-12 py-4 rounded-2xl font-black uppercase tracking-[0.2em] transition-all shadow-[0_0_30px_rgba(37,99,235,0.3)] flex items-center gap-3 relative overflow-hidden",children:h?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"animate-spin",size:20})," INICIANDO..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{size:20})," IGNICIÓN"]})})]})]})})}function f({active:l,completed:c,label:x}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:t("w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-black transition-all",l?"bg-blue-600 text-white ring-4 ring-blue-600/20":c?"bg-green-600 text-white":"bg-gray-800 text-gray-500"),children:c?"✓":""}),e.jsx("span",{className:t("text-[10px] font-black uppercase tracking-widest",l?"text-white":"text-gray-500"),children:x})]})}function v({icon:l,label:c,value:x,color:u}){return e.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-3xl border border-gray-800 text-center space-y-2",children:[e.jsx(l,{className:t("mx-auto mb-2",u==="blue"?"text-blue-500":"text-red-500"),size:24}),e.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:c}),e.jsx("div",{className:"text-lg font-black text-white leading-tight",children:x})]})}export{ne as M};
