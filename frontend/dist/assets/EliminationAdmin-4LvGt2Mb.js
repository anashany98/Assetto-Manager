import{c as h,d as k,r,u as C,j as e,T as q,U as S,M as R,a as t,A as l}from"./index-MjGtIaAt.js";import{u as o}from"./useMutation-Ckz2NycH.js";import{c as m}from"./utils-BykweIWy.js";import{Z as T}from"./zap-BctN5ITw.js";import{P as _}from"./plus-Dqq5J1Gg.js";import{P as $}from"./play-DPq4Txf5.js";import{T as M}from"./triangle-alert-ko4KflD0.js";import{T as z}from"./trash-2-Kfiypbhy.js";import"./clsx-B-dksMZM.js";const E=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],P=h("external-link",E);const A=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],L=h("user-plus",A);function G(){const n=k(),[i,u]=r.useState(""),[p,g]=r.useState(""),[c,j]=r.useState(1),[s,b]=r.useState(null),[d,y]=r.useState(""),{data:x}=C({queryKey:["elimination-races"],queryFn:async()=>(await t.get(`${l}/elimination/list`)).data}),N=o({mutationFn:async()=>{await t.post(`${l}/elimination/create`,{name:i,track_name:p||null,warmup_laps:c})},onSuccess:()=>{n.invalidateQueries({queryKey:["elimination-races"]}),u(""),g("")}}),f=o({mutationFn:async()=>{s&&await t.post(`${l}/elimination/${s}/register`,{driver_name:d})},onSuccess:()=>{n.invalidateQueries({queryKey:["elimination-races"]}),y("")}}),v=o({mutationFn:async a=>{await t.post(`${l}/elimination/${a}/start`)},onSuccess:()=>{n.invalidateQueries({queryKey:["elimination-races"]})}}),w=o({mutationFn:async a=>{await t.delete(`${l}/elimination/${a}`)},onSuccess:()=>{n.invalidateQueries({queryKey:["elimination-races"]}),b(null)}});return e.jsx("div",{className:"min-h-screen bg-gray-950 text-white p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-black uppercase flex items-center",children:[e.jsx(T,{className:"mr-3 text-orange-500"}),"Modo EliminaciÃ³n"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Crea y gestiona carreras por eliminaciÃ³n"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 border border-gray-800",children:[e.jsxs("h2",{className:"text-xl font-black uppercase mb-6 flex items-center",children:[e.jsx(_,{className:"mr-2 text-green-400"}),"Nueva Carrera"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Nombre del Evento"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-gray-800 border border-gray-700 text-white font-bold",placeholder:"Ej: Torneo Viernes Noche",value:i,onChange:a=>u(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Circuito (opcional)"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-gray-800 border border-gray-700 text-white",placeholder:"Ej: Monza, Spa...",value:p,onChange:a=>g(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Vueltas de Calentamiento"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"range",min:"1",max:"3",className:"flex-1 accent-orange-500",value:c,onChange:a=>j(Number(a.target.value))}),e.jsx("span",{className:"text-2xl font-black text-orange-400 w-12 text-center",children:c})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Las eliminaciones empiezan despuÃ©s de la vuelta ",c]})]}),e.jsx("button",{onClick:()=>N.mutate(),disabled:!i,className:m("w-full py-4 rounded-xl font-black uppercase transition-all",i?"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-400 hover:to-red-400":"bg-gray-800 text-gray-600 cursor-not-allowed"),children:"Crear Carrera"})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 border border-gray-800",children:[e.jsxs("h2",{className:"text-xl font-black uppercase mb-6 flex items-center",children:[e.jsx(q,{className:"mr-2 text-yellow-400"}),"Carreras Activas"]}),e.jsxs("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:[x?.map(a=>e.jsx("div",{onClick:()=>b(a.id),className:m("p-4 rounded-xl border-2 cursor-pointer transition-all",s===a.id?"bg-orange-900/30 border-orange-500":"bg-gray-800 border-gray-700 hover:border-gray-600"),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-lg uppercase",children:a.name}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Vuelta ",a.current_lap]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:m("px-3 py-1 rounded-full text-xs font-bold uppercase",a.status==="waiting"&&"bg-yellow-600",a.status==="racing"&&"bg-green-600",a.status==="finished"&&"bg-purple-600"),children:a.status})})]})},a.id)),(!x||x.length===0)&&e.jsx("div",{className:"text-center py-8 text-gray-600",children:"No hay carreras creadas"})]})]})]}),s&&e.jsxs("div",{className:"mt-8 bg-gray-900 rounded-2xl p-6 border border-gray-800",children:[e.jsxs("h2",{className:"text-xl font-black uppercase mb-6 flex items-center",children:[e.jsx(S,{className:"mr-2 text-blue-400"}),"Gestionar Carrera #",s]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-bold mb-3 flex items-center",children:[e.jsx(L,{className:"mr-2",size:18}),"Registrar Piloto"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",className:"flex-1 px-3 py-2 rounded-lg bg-gray-700 text-white",placeholder:"Nombre del piloto",value:d,onChange:a=>y(a.target.value)}),e.jsx("button",{onClick:()=>f.mutate(),disabled:!d,className:"px-4 py-2 bg-blue-600 rounded-lg font-bold hover:bg-blue-500 disabled:opacity-50",children:"AÃ±adir"})]})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-bold mb-3 flex items-center",children:[e.jsx($,{className:"mr-2",size:18}),"Control"]}),e.jsx("button",{onClick:()=>v.mutate(s),className:"w-full py-3 bg-green-600 rounded-lg font-black uppercase hover:bg-green-500",children:"ðŸ Iniciar Carrera"})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-bold mb-3 flex items-center",children:[e.jsx(M,{className:"mr-2",size:18}),"Acciones"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("a",{href:`/elimination-tv/${s}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 bg-purple-600 rounded-lg font-bold text-center hover:bg-purple-500 flex items-center justify-center",children:[e.jsx(R,{className:"mr-2",size:18}),"TV",e.jsx(P,{className:"ml-1",size:14})]}),e.jsx("button",{onClick:()=>w.mutate(s),className:"px-4 py-3 bg-red-600 rounded-lg hover:bg-red-500",children:e.jsx(z,{size:18})})]})]})]})]})]})})}export{G as default};
