import{c as A,r as j,u as U,j as e,a as _,A as R,d as re,G as le,U as je,S as Se,f as Ce,h as Ae,M as oe}from"./index-MjGtIaAt.js";import{u as P}from"./useMutation-Ckz2NycH.js";import{c as C}from"./utils-BykweIWy.js";import{u as Re,g as we}from"./stations-BBBEE_Ei.js";import{R as Te}from"./refresh-cw-DQN2a5yv.js";import{I as _e}from"./info-BJzi6qvF.js";import{T as ge}from"./triangle-alert-ko4KflD0.js";import{C as ke}from"./circle-alert-9EthxjUH.js";import{S as Ie}from"./save-Cgmpexpf.js";import{Z as ie}from"./zap-BctN5ITw.js";import{G as Oe}from"./gauge-BmF6m-rA.js";import{E as $}from"./eye-DPV186ke.js";import{C as z,W as Me}from"./wifi-off-BRKQCIuI.js";import{C as te}from"./camera-FfIFRMKE.js";import{C as De}from"./car-Bto1fEN0.js";import{M as he}from"./monitor-BxVudD1P.js";import{M as Le}from"./megaphone-DzGt9wNw.js";import{B as ce}from"./badge-dollar-sign-Du8r7ZRT.js";import{A as de}from"./activity-d8XIJMYL.js";import{Q as Pe}from"./qr-code-B6KORoVk.js";import{P as Fe}from"./power-Cer9ZwtD.js";import{C as Ve}from"./circle-check-big-D_wv1sd6.js";import{P as ue}from"./plus-Dqq5J1Gg.js";import"./clsx-B-dksMZM.js";const He=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ge=A("bell",He);const Ue=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],fe=A("bot",Ue);const Be=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$e=A("chevron-down",Be);const ze=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],qe=A("chevron-up",ze);const Ke=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],xe=A("cog",Ke);const We=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],X=A("database",We);const Ye=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Qe=A("file-text",Ye);const Ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Xe=A("globe",Ze);const Je=[["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m14.305 7.53.923-.382",key:"1mlnsw"}],["path",{d:"m15.228 4.852-.923-.383",key:"82mpwg"}],["path",{d:"m16.852 3.228-.383-.924",key:"ln4sir"}],["path",{d:"m16.852 8.772-.383.923",key:"1dejw0"}],["path",{d:"m19.148 3.228.383-.924",key:"192kgf"}],["path",{d:"m19.53 9.696-.382-.924",key:"fiavlr"}],["path",{d:"m20.772 4.852.924-.383",key:"1j8mgp"}],["path",{d:"m20.772 7.148.924.383",key:"zix9be"}],["path",{d:"M22 13v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"1tnzv8"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}]],ea=A("monitor-cog",Je);const aa=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],me=A("panels-top-left",aa);const ta=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pe=A("pen",ta);const sa=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ra=A("rotate-ccw",sa);const la=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],J=A("sliders-vertical",la);const na=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],se=A("terminal",na);const oa=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ia=A("truck",oa);const ca=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],be=A("upload",ca);const da=[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]],ua=A("vibrate",da);const xa=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ye=A("volume-2",xa);const ma=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],pa=A("wifi",ma);function ba(){const[p,u]=j.useState("ALL"),[h,f]=j.useState(!0),{data:N,isRefetching:n}=U({queryKey:["system_logs"],queryFn:async()=>(await _.get(`${R}/system/logs/?limit=500`)).data,refetchInterval:h?3e3:!1}),g=N?.filter(x=>p==="ALL"?!0:p==="ERROR"?x.level==="ERROR"||x.level==="CRITICAL":p==="WARNING"?x.level==="WARNING":!0)||[],S=x=>{switch(x){case"ERROR":case"CRITICAL":return e.jsx(ke,{className:"text-red-500",size:16});case"WARNING":return e.jsx(ge,{className:"text-yellow-500",size:16});default:return e.jsx(_e,{className:"text-blue-500",size:16})}},I=x=>new Date(x*1e3).toLocaleTimeString();return e.jsxs("div",{className:"bg-gray-900 rounded-3xl border border-gray-700 shadow-xl overflow-hidden flex flex-col h-[600px]",children:[e.jsxs("div",{className:"bg-gray-800 p-6 flex items-center justify-between border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gray-700 p-3 rounded-xl text-gray-300",children:e.jsx(se,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:"Logs del Sistema"}),e.jsxs("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-widest",children:[N?.length||0," Eventos Registrados"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex bg-gray-900 rounded-lg p-1 border border-gray-700",children:["ALL","WARNING","ERROR"].map(x=>e.jsx("button",{onClick:()=>u(x),className:C("px-3 py-1.5 rounded-md text-xs font-bold uppercase tracking-wide transition-all",p===x?"bg-gray-700 text-white shadow-sm":"text-gray-500 hover:text-gray-300"),children:x==="ALL"?"Todos":x},x))}),e.jsx("button",{onClick:()=>f(!h),className:C("p-2 rounded-lg transition-colors",h?"bg-green-500/20 text-green-400":"bg-gray-700 text-gray-500"),title:h?"Auto-refresh ON":"Auto-refresh PAUSED",children:e.jsx(Te,{size:20,className:C(h&&n&&"animate-spin")})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-black/50 font-mono text-sm",children:g.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-600 space-y-4",children:[e.jsx(se,{size:48,className:"opacity-20"}),e.jsx("p",{children:"No hay logs recientes"})]}):g.map((x,w)=>e.jsxs("div",{className:C("flex items-start space-x-3 p-2 rounded hover:bg-gray-800 transition-colors border-l-2",x.level==="ERROR"?"border-red-500 bg-red-900/10":x.level==="WARNING"?"border-yellow-500 bg-yellow-900/10":"border-transparent"),children:[e.jsx("span",{className:"text-gray-500 shrink-0 select-none w-20 text-[11px] pt-0.5",children:I(x.timestamp)}),e.jsx("div",{className:"shrink-0 pt-0.5",children:S(x.level)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-0.5",children:[e.jsx("span",{className:C("text-[10px] font-bold px-1.5 rounded uppercase tracking-wider",x.source==="server"?"bg-purple-900/30 text-purple-400":"bg-blue-900/30 text-blue-400"),children:x.source}),x.details&&e.jsx("span",{className:"text-[10px] text-gray-600 truncate max-w-[200px]",title:x.details,children:x.details})]}),e.jsx("p",{className:C("break-words whitespace-pre-wrap leading-relaxed",x.level==="ERROR"?"text-red-200":x.level==="WARNING"?"text-yellow-200":"text-gray-300"),children:x.message})]})]},w))})]})}const ga=()=>{const p=re(),[u,h]=j.useState(!1),[f,N]=j.useState(""),[n,g]=j.useState(15),[S,I]=j.useState(null),{data:x,isLoading:w,error:m}=U({queryKey:["ads"],queryFn:async()=>{const b=await fetch(`${R}/ads/`);if(!b.ok)throw new Error("Failed to fetch ads");return b.json()}}),t=P({mutationFn:async b=>{const T=await fetch(`${R}/ads/`,{method:"POST",body:b});if(!T.ok)throw new Error("Failed to upload ad");return T.json()},onSuccess:()=>{p.invalidateQueries({queryKey:["ads"]}),N(""),I(null),h(!1)}}),H=P({mutationFn:async b=>{if(!(await fetch(`${R}/ads/${b}/toggle`,{method:"PUT"})).ok)throw new Error("Toggle failed")},onSuccess:()=>p.invalidateQueries({queryKey:["ads"]})}),B=P({mutationFn:async b=>{if(!(await fetch(`${R}/ads/${b}`,{method:"DELETE"})).ok)throw new Error("Delete failed")},onSuccess:()=>p.invalidateQueries({queryKey:["ads"]})}),M=b=>{if(b.preventDefault(),!S||!f)return;const T=new FormData;T.append("title",f),T.append("display_duration",n.toString()),T.append("file",S),T.append("is_active","true"),h(!0),t.mutate(T)};return e.jsxs("div",{className:"space-y-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold border-b border-gray-700 pb-2",children:"Promotions & Sponsors"}),e.jsxs("form",{onSubmit:M,className:"bg-gray-800 p-4 rounded-lg space-y-4 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"New Promotion"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Title"}),e.jsx("input",{type:"text",className:"w-full bg-gray-700 rounded p-2 border border-gray-600 focus:outline-none focus:border-blue-500",value:f,onChange:b=>N(b.target.value),placeholder:"Checking E.g. Burger Combo",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Duration (s)"}),e.jsx("input",{type:"number",className:"w-full bg-gray-700 rounded p-2 border border-gray-600",value:n,onChange:b=>g(parseInt(b.target.value)),min:5,max:300})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",className:"w-full bg-gray-700 rounded p-2 text-sm",onChange:b=>I(b.target.files?b.target.files[0]:null),required:!0})]})]}),e.jsx("button",{type:"submit",disabled:u||!S,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded transition-colors disabled:opacity-50",children:u?"Uploading...":"Add Promotion"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[w&&e.jsxs("div",{className:"col-span-full py-12 flex flex-col items-center gap-3 text-gray-500",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:"Cargando..."})]}),m&&e.jsxs("div",{className:"col-span-full py-12 bg-red-500/10 border border-red-500/20 rounded-2xl text-center",children:[e.jsx("p",{className:"text-red-400 font-bold uppercase tracking-tight mb-1",children:"Error de conexiÃ³n"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"No se han podido recuperar las promociones."})]}),Array.isArray(x)?x.map(b=>e.jsxs("div",{className:`relative group border rounded-2xl shadow-lg border-gray-700 overflow-hidden transition-all hover:border-gray-500 ${b.is_active?"border-green-500/30":"border-red-500/30 opacity-75"}`,children:[e.jsxs("div",{className:"aspect-video bg-black relative",children:[e.jsx("img",{src:`${R}/static/${b.image_path}`,alt:b.title,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/90 to-transparent p-4",children:[e.jsx("p",{className:"font-bold text-white",children:b.title}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black tracking-widest",children:[b.display_duration,"s DE EXPOSICIÃ“N"]})]})]}),e.jsxs("div",{className:"p-3 flex justify-between bg-gray-900/80 items-center",children:[e.jsx("button",{onClick:()=>H.mutate(b.id),className:`text-[10px] font-black uppercase tracking-wider px-3 py-1.5 rounded-lg transition-all ${b.is_active?"bg-green-500/20 text-green-400 hover:bg-green-500 hover:text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600 hover:text-white"}`,children:b.is_active?"Activa":"Pausada"}),e.jsx("button",{onClick:()=>{confirm("Â¿EstÃ¡s seguro de eliminar esta promociÃ³n?")&&B.mutate(b.id)},className:"text-[10px] font-black uppercase tracking-wider bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white px-3 py-1.5 rounded-lg transition-all",children:"Eliminar"})]})]},b.id)):!w&&e.jsx("div",{className:"col-span-full py-12 text-center bg-gray-800/50 rounded-2xl border-2 border-dashed border-gray-700",children:e.jsx("p",{className:"text-gray-500 font-bold italic",children:"No has creado ninguna promociÃ³n todavÃ­a."})})]})]})},ee="http://192.168.1.108:8000";function ha(){const[p,u]=j.useState({isSupported:!1,isSubscribed:!1,permission:"default",loading:!1,error:null});j.useEffect(()=>{const n="serviceWorker"in navigator&&"PushManager"in window;u(g=>({...g,isSupported:n,permission:n?Notification.permission:"denied"})),n&&navigator.serviceWorker.controller&&h()},[]);const h=async()=>{try{const g=await(await navigator.serviceWorker.ready).pushManager.getSubscription();u(S=>({...S,isSubscribed:!!g}))}catch(n){console.error("Error checking subscription:",n)}},f=j.useCallback(async()=>{if(!p.isSupported)return u(n=>({...n,error:"Push notifications not supported"})),!1;u(n=>({...n,loading:!0,error:null}));try{const n=await Notification.requestPermission();if(u(m=>({...m,permission:n})),n!=="granted")return u(m=>({...m,loading:!1,error:"Permission denied"})),!1;const g=await navigator.serviceWorker.ready,I=(await _.get(`${ee}/push/vapid-key`)).data.publicKey,w=(await g.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fa(I)})).toJSON();return await _.post(`${ee}/push/subscribe`,{endpoint:w.endpoint,keys:w.keys}),u(m=>({...m,isSubscribed:!0,loading:!1})),!0}catch(n){return console.error("Subscription error:",n),u(g=>({...g,loading:!1,error:n instanceof Error?n.message:"Subscription failed"})),!1}},[p.isSupported]),N=j.useCallback(async()=>{u(n=>({...n,loading:!0}));try{const g=await(await navigator.serviceWorker.ready).pushManager.getSubscription();return g&&(await g.unsubscribe(),await _.delete(`${ee}/push/unsubscribe`,{params:{endpoint:g.endpoint}})),u(S=>({...S,isSubscribed:!1,loading:!1})),!0}catch(n){return console.error("Unsubscribe error:",n),u(g=>({...g,loading:!1,error:n instanceof Error?n.message:"Unsubscribe failed"})),!1}},[]);return{...p,subscribe:f,unsubscribe:N}}function fa(p){const u="=".repeat((4-p.length%4)%4),h=(p+u).replace(/-/g,"+").replace(/_/g,"/"),f=window.atob(h),N=new Uint8Array(f.length);for(let n=0;n<f.length;++n)N[n]=f.charCodeAt(n);return N.buffer}function i({label:p,value:u,min:h=0,max:f=100,step:N=1,unit:n="%",color:g="blue",onChange:S}){const I={blue:"accent-blue-500",orange:"accent-orange-500",purple:"accent-purple-500",green:"accent-green-500",red:"accent-red-500",cyan:"accent-cyan-500",yellow:"accent-yellow-500"},x={blue:"text-blue-400",orange:"text-orange-400",purple:"text-purple-400",green:"text-green-400",red:"text-red-400",cyan:"text-cyan-400",yellow:"text-yellow-400"};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-sm font-bold text-gray-300",children:p}),e.jsxs("span",{className:C("text-sm font-bold",x[g]||"text-blue-400"),children:[u,n]})]}),e.jsx("input",{type:"range",min:h,max:f,step:N,value:u,onChange:w=>S(Number(w.target.value)),className:C("w-full h-2 bg-gray-700 rounded-lg cursor-pointer",I[g])})]})}function y({label:p,value:u,description:h,onChange:f}){return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/50 rounded-xl border border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white",children:p}),h&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h})]}),e.jsx("button",{onClick:()=>f(!u),className:C("w-14 h-7 rounded-full transition-all relative",u?"bg-green-500":"bg-gray-600"),children:e.jsx("div",{className:C("absolute top-1 left-1 w-5 h-5 rounded-full bg-white shadow-lg transition-transform",u&&"translate-x-7")})})]})}function k({label:p,value:u,options:h,onChange:f}){return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-300",children:p}),e.jsx("select",{value:u,onChange:N=>f(N.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-800 border border-gray-600 text-white font-medium focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",children:h.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))})]})}function v({title:p,icon:u,color:h="blue",children:f,defaultOpen:N=!0}){const[n,g]=j.useState(N),S={blue:"text-blue-400",orange:"text-orange-400",purple:"text-purple-400",green:"text-green-400",red:"text-red-400",cyan:"text-cyan-400",yellow:"text-yellow-400"};return e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("button",{onClick:()=>g(!n),className:C("w-full flex items-center justify-between p-4 transition-colors",n?"bg-white/5":"hover:bg-white/5"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{size:20,className:S[h]||"text-blue-400"}),e.jsx("span",{className:"font-bold text-white",children:p})]}),n?e.jsx(qe,{size:18,className:"text-gray-400"}):e.jsx($e,{size:18,className:"text-gray-400"})]}),n&&e.jsx("div",{className:"p-4 pt-0 space-y-4 animate-fade-in",children:f})]})}function ya({category:p,profileName:u}){const h=re(),[f,N]=j.useState(null),[n,g]=j.useState(!1),{data:S,isLoading:I,error:x}=U({queryKey:["ac-config",p,u],queryFn:async()=>(await _.get(`${R}/configs/profile/${p}/${u}/parsed`)).data,enabled:!!u}),w=P({mutationFn:async r=>{await _.post(`${R}/configs/profile/${p}/${u}/parsed`,{sections:r})},onSuccess:()=>{h.invalidateQueries({queryKey:["ac-config",p,u]}),g(!1)}}),m=f??S?.sections??{},t=(r,c,s)=>{N(d=>{const l=d??S?.sections??{};return{...l,[r]:{...l[r]||{},[c]:s}}}),g(!0)},H=()=>{f&&w.mutate(f)},B=()=>{N(null),g(!1)};if(I)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"})});if(x)return e.jsx("div",{className:"p-6 text-center text-red-400",children:"Error al cargar configuraciÃ³n"});const M=()=>{switch(p){case"controls":return b();case"gameplay":return T();case"video":return O();case"audio":return G();case"camera":return q();case"race":return D();case"weather":return K();default:return W()}},b=()=>{const r=m.FF_POST_PROCESS||{},c=m.STEER||{},s=m.ADVANCED||{},d=m.KEYBOARD||{};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(v,{title:"Force Feedback",icon:ua,color:"blue",children:[e.jsx(i,{label:"FF Gain (Intensidad General)",value:Math.round(Number(r.ENABLED!=="0"?r.TYPE==="LUT"?100:Number(c.FF_GAIN||1)*100:0)),min:0,max:200,step:5,onChange:l=>t("STEER","FF_GAIN",(l/100).toFixed(2)),color:"blue"}),e.jsx(i,{label:"Damper (AmortiguaciÃ³n)",value:Math.round(Number(s.DAMPER_GAIN||.5)*100),min:0,max:100,step:5,onChange:l=>t("ADVANCED","DAMPER_GAIN",(l/100).toFixed(2)),color:"blue"}),e.jsx(i,{label:"Minimum Force",value:Math.round(Number(s.MIN_FF||.05)*100),min:0,max:30,step:1,onChange:l=>t("ADVANCED","MIN_FF",(l/100).toFixed(2)),color:"blue"}),e.jsx(i,{label:"Filter (Suavizado)",value:Math.round(Number(c.FILTER_FF||0)*100),min:0,max:100,step:5,onChange:l=>t("STEER","FILTER_FF",(l/100).toFixed(2)),color:"blue"}),e.jsx(y,{label:"Enhanced Understeer Effect",value:s.ENHANCED_UNDERSTEER==="1",description:"Mejora la sensaciÃ³n de subviraje",onChange:l=>t("ADVANCED","ENHANCED_UNDERSTEER",l?"1":"0")})]}),e.jsxs(v,{title:"Efectos FFB",icon:ie,color:"orange",defaultOpen:!1,children:[e.jsx(i,{label:"Kerb Effect (Pianos)",value:Math.round(Number(s.KERB_EFFECT||.4)*100),min:0,max:150,step:5,onChange:l=>t("ADVANCED","KERB_EFFECT",(l/100).toFixed(2)),color:"orange"}),e.jsx(i,{label:"Road Effect (Textura Asfalto)",value:Math.round(Number(s.ROAD_EFFECT||.3)*100),min:0,max:150,step:5,onChange:l=>t("ADVANCED","ROAD_EFFECT",(l/100).toFixed(2)),color:"orange"}),e.jsx(i,{label:"Slip Effect (Deslizamiento)",value:Math.round(Number(s.SLIP_EFFECT||0)*100),min:0,max:150,step:5,onChange:l=>t("ADVANCED","SLIP_EFFECT",(l/100).toFixed(2)),color:"orange"}),e.jsx(i,{label:"ABS Effect",value:Math.round(Number(s.ABS_EFFECT||.25)*100),min:0,max:100,step:5,onChange:l=>t("ADVANCED","ABS_EFFECT",(l/100).toFixed(2)),color:"orange"})]}),e.jsxs(v,{title:"DirecciÃ³n",icon:Oe,color:"purple",defaultOpen:!1,children:[e.jsx(i,{label:"Grados de RotaciÃ³n (Lock)",value:Number(c.LOCK||900),min:180,max:1080,step:10,unit:"Â°",onChange:l=>t("STEER","LOCK",String(l)),color:"purple"}),e.jsx(i,{label:"Steer Gamma",value:Math.round(Number(c.STEER_GAMMA||1)*100),min:50,max:200,step:5,onChange:l=>t("STEER","STEER_GAMMA",(l/100).toFixed(2)),color:"purple"}),e.jsx(i,{label:"Steer Filter",value:Math.round(Number(c.STEER_FILTER||0)*100),min:0,max:100,step:5,onChange:l=>t("STEER","STEER_FILTER",(l/100).toFixed(2)),color:"purple"}),e.jsx(i,{label:"Speed Sensitivity",value:Math.round(Number(c.SPEED_SENSITIVITY||0)*100),min:0,max:100,step:5,onChange:l=>t("STEER","SPEED_SENSITIVITY",(l/100).toFixed(2)),color:"purple"}),e.jsx(i,{label:"Deadzone",value:Math.round(Number(c.STEER_DEADZONE||0)*100),min:0,max:20,step:1,onChange:l=>t("STEER","STEER_DEADZONE",(l/100).toFixed(2)),color:"purple"})]}),e.jsxs(v,{title:"Teclado (Sensibilidad)",icon:le,color:"cyan",defaultOpen:!1,children:[e.jsx(i,{label:"Steer Speed",value:Math.round(Number(d.STEER_SPEED||1.75)*100),min:50,max:500,step:25,onChange:l=>t("KEYBOARD","STEER_SPEED",(l/100).toFixed(2)),color:"cyan"}),e.jsx(i,{label:"Throttle Speed",value:Math.round(Number(d.GAS_SPEED||2)*100),min:50,max:500,step:25,onChange:l=>t("KEYBOARD","GAS_SPEED",(l/100).toFixed(2)),color:"cyan"}),e.jsx(i,{label:"Brake Speed",value:Math.round(Number(d.BRAKE_SPEED||2)*100),min:50,max:500,step:25,onChange:l=>t("KEYBOARD","BRAKE_SPEED",(l/100).toFixed(2)),color:"cyan"})]})]})},T=()=>{const r=m.ASSISTS||{},c=m.REALISM||{};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(v,{title:"Ayudas a la ConducciÃ³n",icon:J,color:"orange",children:[e.jsx(k,{label:"ABS (Antibloqueo)",value:r.ABS??"1",options:[{value:"0",label:"Off - Desactivado"},{value:"1",label:"Factory - SegÃºn el coche"},{value:"2",label:"On - Siempre activado"}],onChange:s=>t("ASSISTS","ABS",s)}),e.jsx(k,{label:"Traction Control (TC)",value:r.TRACTION_CONTROL??"1",options:[{value:"0",label:"Off - Desactivado"},{value:"1",label:"Factory - SegÃºn el coche"},{value:"2",label:"On - Siempre activado"}],onChange:s=>t("ASSISTS","TRACTION_CONTROL",s)}),e.jsx(i,{label:"Stability Control (%)",value:Number(r.STABILITY_CONTROL||0),min:0,max:100,step:5,onChange:s=>t("ASSISTS","STABILITY_CONTROL",String(s)),color:"orange"}),e.jsx(y,{label:"Auto Clutch",value:r.AUTO_CLUTCH==="1",description:"Embrague automÃ¡tico al cambiar",onChange:s=>t("ASSISTS","AUTO_CLUTCH",s?"1":"0")}),e.jsx(y,{label:"Auto Blip (Heel-Toe)",value:r.AUTO_BLIP==="1",description:"Punta-tacÃ³n automÃ¡tico al reducir",onChange:s=>t("ASSISTS","AUTO_BLIP",s?"1":"0")}),e.jsx(y,{label:"Autosteer",value:r.AUTOSTEER==="1",description:"DirecciÃ³n asistida automÃ¡tica",onChange:s=>t("ASSISTS","AUTOSTEER",s?"1":"0")})]}),e.jsxs(v,{title:"Ayudas Visuales",icon:$,color:"cyan",defaultOpen:!1,children:[e.jsx(y,{label:"Ideal Racing Line",value:r.IDEAL_LINE==="1",description:"Muestra la lÃ­nea Ã³ptima en pista",onChange:s=>t("ASSISTS","IDEAL_LINE",s?"1":"0")}),e.jsx(y,{label:"Auto Gear",value:r.AUTO_GEAR==="1",description:"Cambio automÃ¡tico de marchas",onChange:s=>t("ASSISTS","AUTO_GEAR",s?"1":"0")}),e.jsx(y,{label:"Visual Damage",value:c.VISUAL_DAMAGE==="1",description:"Mostrar daÃ±os visuales en el coche",onChange:s=>t("REALISM","VISUAL_DAMAGE",s?"1":"0")})]}),e.jsxs(v,{title:"Realismo",icon:ie,color:"red",defaultOpen:!1,children:[e.jsx(k,{label:"Mechanical Damage",value:c.DAMAGE??"100",options:[{value:"0",label:"Off - Sin daÃ±os"},{value:"25",label:"25%"},{value:"50",label:"50%"},{value:"75",label:"75%"},{value:"100",label:"100% - Realista"}],onChange:s=>t("REALISM","DAMAGE",s)}),e.jsx(k,{label:"Fuel Consumption",value:c.FUEL_RATE??"1",options:[{value:"0",label:"Off - Combustible infinito"},{value:"1",label:"1x - Normal"},{value:"2",label:"2x - Doble consumo"},{value:"3",label:"3x - Triple consumo"}],onChange:s=>t("REALISM","FUEL_RATE",s)}),e.jsx(k,{label:"Tyre Wear",value:c.TYRE_WEAR??"1",options:[{value:"0",label:"Off - NeumÃ¡ticos infinitos"},{value:"1",label:"1x - Normal"},{value:"2",label:"2x - Doble desgaste"},{value:"3",label:"3x - Triple desgaste"}],onChange:s=>t("REALISM","TYRE_WEAR",s)}),e.jsx(y,{label:"Tyre Blankets",value:c.TYRE_BLANKETS==="1",description:"NeumÃ¡ticos precalentados al inicio",onChange:s=>t("REALISM","TYRE_BLANKETS",s?"1":"0")}),e.jsx(y,{label:"Penalties",value:c.PENALTIES==="1",description:"Penalizaciones por cortar",onChange:s=>t("REALISM","PENALTIES",s?"1":"0")})]})]})},O=()=>{const r=m.VIDEO||{},c=m.POST_PROCESS||{},s=m.MIRROR||{},d=m.CUBEMAP||{},l=m.ASSETTOCORSA||{};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(v,{title:"Pantalla",icon:ea,color:"purple",children:[e.jsx(k,{label:"ResoluciÃ³n",value:`${r.WIDTH||"1920"}x${r.HEIGHT||"1080"}`,options:[{value:"1280x720",label:"1280Ã—720 (720p HD)"},{value:"1600x900",label:"1600Ã—900 (900p)"},{value:"1920x1080",label:"1920Ã—1080 (1080p Full HD)"},{value:"2560x1440",label:"2560Ã—1440 (1440p 2K)"},{value:"3440x1440",label:"3440Ã—1440 (Ultrawide)"},{value:"3840x2160",label:"3840Ã—2160 (4K UHD)"}],onChange:o=>{const[Y,Q]=o.split("x");t("VIDEO","WIDTH",Y),t("VIDEO","HEIGHT",Q)}}),e.jsx(y,{label:"Fullscreen",value:r.FULLSCREEN==="1",onChange:o=>t("VIDEO","FULLSCREEN",o?"1":"0")}),e.jsx(y,{label:"VSync",value:r.VSYNC==="1",description:"SincronizaciÃ³n vertical",onChange:o=>t("VIDEO","VSYNC",o?"1":"0")}),e.jsx(i,{label:"Frame Rate Limit",value:Number(r.FPS_CAP_MS||0)===0?0:Math.round(1e3/Number(r.FPS_CAP_MS||16.67)),min:0,max:240,step:10,unit:" fps",onChange:o=>t("VIDEO","FPS_CAP_MS",o===0?"0":String(Math.round(1e3/o))),color:"purple"})]}),e.jsxs(v,{title:"Realidad Virtual (VR)",icon:$,color:"cyan",defaultOpen:!1,children:[e.jsx(k,{label:"Rendering Mode (Modo de Renderizado)",value:r.CAMERA_MODE??"DEFAULT",options:[{value:"DEFAULT",label:"ðŸ–¥ï¸ Default - Monitor Normal"},{value:"OCULUS",label:"ðŸ¥½ Oculus Rift - Modo Nativo Oculus"},{value:"OPENVR",label:"ðŸŽ® OpenVR - SteamVR / Otros HMD"},{value:"TRIPLE",label:"ðŸ–¥ï¸ðŸ–¥ï¸ðŸ–¥ï¸ Triple Screen"}],onChange:o=>t("VIDEO","CAMERA_MODE",o)}),e.jsx(y,{label:"Fixed Resolution (ResoluciÃ³n Fija)",value:r.FIXED_RESOLUTION!=="0",description:"Desactivar para VR - deja que el HMD controle la resoluciÃ³n",onChange:o=>t("VIDEO","FIXED_RESOLUTION",o?"1":"0")}),e.jsx(i,{label:"Render Resolution Multiplier (%)",value:Number(r.RENDER_SCALE||100),min:50,max:200,step:10,onChange:o=>t("VIDEO","RENDER_SCALE",String(o)),color:"cyan"}),e.jsx(i,{label:"Refresh Rate (Hz)",value:Number(r.REFRESH||90),min:60,max:144,step:1,unit:" Hz",onChange:o=>t("VIDEO","REFRESH",String(o)),color:"cyan"})]}),e.jsxs(v,{title:"Anti-Aliasing",icon:$,color:"blue",defaultOpen:!1,children:[e.jsx(k,{label:"MSAA Samples",value:r.AASAMPLES??"4",options:[{value:"0",label:"Off"},{value:"2",label:"2x MSAA"},{value:"4",label:"4x MSAA"},{value:"8",label:"8x MSAA"}],onChange:o=>t("VIDEO","AASAMPLES",o)}),e.jsx(k,{label:"Anisotropic Filtering",value:r.ANISOTROPIC??"8",options:[{value:"0",label:"Off"},{value:"2",label:"2x"},{value:"4",label:"4x"},{value:"8",label:"8x"},{value:"16",label:"16x (Max)"}],onChange:o=>t("VIDEO","ANISOTROPIC",o)}),e.jsx(y,{label:"FXAA",value:c.FXAA==="1",description:"Fast Approximate Anti-Aliasing",onChange:o=>t("POST_PROCESS","FXAA",o?"1":"0")})]}),e.jsxs(v,{title:"Sombras",icon:z,color:"orange",defaultOpen:!1,children:[e.jsx(k,{label:"Shadow Map Size",value:r.SHADOW_MAP_SIZE??"2048",options:[{value:"0",label:"Off"},{value:"512",label:"512 (Low)"},{value:"1024",label:"1024 (Medium)"},{value:"2048",label:"2048 (High)"},{value:"4096",label:"4096 (Ultra)"}],onChange:o=>t("VIDEO","SHADOW_MAP_SIZE",o)}),e.jsx(i,{label:"World Detail",value:Number(l.WORLD_DETAIL||4),min:0,max:5,step:1,unit:"",onChange:o=>t("ASSETTOCORSA","WORLD_DETAIL",String(o)),color:"orange"})]}),e.jsxs(v,{title:"Reflejos y Espejos",icon:te,color:"cyan",defaultOpen:!1,children:[e.jsx(k,{label:"Cubemap Size (Reflections)",value:d.SIZE??"1024",options:[{value:"0",label:"Off"},{value:"256",label:"256 (Low)"},{value:"512",label:"512 (Medium)"},{value:"1024",label:"1024 (High)"},{value:"2048",label:"2048 (Ultra)"}],onChange:o=>t("CUBEMAP","SIZE",o)}),e.jsx(i,{label:"Cubemap Faces/Frame",value:Number(d.FACES_PER_FRAME||3),min:1,max:6,step:1,unit:"",onChange:o=>t("CUBEMAP","FACES_PER_FRAME",String(o)),color:"cyan"}),e.jsx(k,{label:"Mirror Resolution",value:s.SIZE??"512",options:[{value:"256",label:"256 (Low)"},{value:"512",label:"512 (Medium)"},{value:"1024",label:"1024 (High)"}],onChange:o=>t("MIRROR","SIZE",o)}),e.jsx(y,{label:"High Quality Mirror",value:s.HQ==="1",onChange:o=>t("MIRROR","HQ",o?"1":"0")})]}),e.jsxs(v,{title:"Post-Procesado",icon:J,color:"green",defaultOpen:!1,children:[e.jsx(y,{label:"Post-Processing Enabled",value:c.ENABLED==="1",onChange:o=>t("POST_PROCESS","ENABLED",o?"1":"0")}),e.jsx(i,{label:"Effect Quality",value:Number(c.QUALITY||3),min:0,max:5,step:1,unit:"",onChange:o=>t("POST_PROCESS","QUALITY",String(o)),color:"green"}),e.jsx(i,{label:"Glare",value:Number(c.GLARE||2),min:0,max:5,step:1,unit:"",onChange:o=>t("POST_PROCESS","GLARE",String(o)),color:"green"}),e.jsx(i,{label:"Depth of Field (DOF)",value:Number(c.DOF||0),min:0,max:5,step:1,unit:"",onChange:o=>t("POST_PROCESS","DOF",String(o)),color:"green"}),e.jsx(y,{label:"Motion Blur",value:r.MOTION_BLUR!=="0",description:"Desenfoque de movimiento",onChange:o=>t("VIDEO","MOTION_BLUR",o?"5":"0")}),e.jsx(y,{label:"Heat Shimmer",value:c.HEAT_SHIMMER==="1",description:"Efecto de calor del asfalto",onChange:o=>t("POST_PROCESS","HEAT_SHIMMER",o?"1":"0")}),e.jsx(y,{label:"Rays of God (Sunrays)",value:c.RAYS_OF_GOD==="1",description:"Rayos de sol volumÃ©tricos",onChange:o=>t("POST_PROCESS","RAYS_OF_GOD",o?"1":"0")})]}),e.jsxs(v,{title:"Humo y PartÃ­culas",icon:z,color:"yellow",defaultOpen:!1,children:[e.jsx(i,{label:"Smoke Generation",value:Number(r.SMOKE||2),min:0,max:5,step:1,unit:"",onChange:o=>t("VIDEO","SMOKE",String(o)),color:"yellow"}),e.jsx(y,{label:"Smoke in Mirrors",value:r.RENDER_SMOKE_IN_MIRROR==="1",onChange:o=>t("VIDEO","RENDER_SMOKE_IN_MIRROR",o?"1":"0")})]})]})},G=()=>{const r=m.LEVELS||{};return e.jsx("div",{className:"space-y-4",children:e.jsxs(v,{title:"Niveles de Audio",icon:ye,color:"green",children:[e.jsx(i,{label:"Master Volume",value:Math.round(Number(r.MASTER||.8)*100),min:0,max:100,step:5,onChange:c=>t("LEVELS","MASTER",(c/100).toFixed(2)),color:"green"}),e.jsx(i,{label:"Engine",value:Math.round(Number(r.ENGINE||.8)*100),min:0,max:100,step:5,onChange:c=>t("LEVELS","ENGINE",(c/100).toFixed(2)),color:"green"}),e.jsx(i,{label:"Tyres (Screeching)",value:Math.round(Number(r.TYRES||.8)*100),min:0,max:100,step:5,onChange:c=>t("LEVELS","TYRES",(c/100).toFixed(2)),color:"green"}),e.jsx(i,{label:"Surfaces (Road Noise)",value:Math.round(Number(r.SURFACES||.5)*100),min:0,max:100,step:5,onChange:c=>t("LEVELS","SURFACES",(c/100).toFixed(2)),color:"green"}),e.jsx(i,{label:"Wind",value:Math.round(Number(r.WIND||.5)*100),min:0,max:100,step:5,onChange:c=>t("LEVELS","WIND",(c/100).toFixed(2)),color:"green"}),e.jsx(i,{label:"Opponents",value:Math.round(Number(r.OPPONENTS||.8)*100),min:0,max:100,step:5,onChange:c=>t("LEVELS","OPPONENTS",(c/100).toFixed(2)),color:"green"}),e.jsx(i,{label:"Dirt/Gravel",value:Math.round(Number(r.DIRT||.5)*100),min:0,max:100,step:5,onChange:c=>t("LEVELS","DIRT",(c/100).toFixed(2)),color:"green"})]})})},q=()=>{const r=m.COCKPIT||{},c=m.CHASE||{},s=m.HOOD||{},d=m.GENERAL||{};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(v,{title:"CÃ¡mara Cockpit (Interior)",icon:te,color:"cyan",children:[e.jsx(i,{label:"Field of View (FOV)",value:Number(r.FOV||56),min:30,max:100,step:1,unit:"Â°",onChange:l=>t("COCKPIT","FOV",String(l)),color:"cyan"}),e.jsx(i,{label:"Distance (Distancia)",value:Math.round(Number(r.DISTANCE||.4)*100),min:0,max:100,step:5,onChange:l=>t("COCKPIT","DISTANCE",(l/100).toFixed(2)),color:"cyan"}),e.jsx(i,{label:"Height (Altura)",value:Math.round((Number(r.HEIGHT||0)+.5)*100),min:0,max:100,step:5,onChange:l=>t("COCKPIT","HEIGHT",(l/100-.5).toFixed(2)),color:"cyan"}),e.jsx(i,{label:"Exposure Offset",value:Math.round(Number(r.EXPOSURE||0)*100+50),min:0,max:100,step:5,onChange:l=>t("COCKPIT","EXPOSURE",((l-50)/100).toFixed(2)),color:"cyan"})]}),e.jsxs(v,{title:"Opciones Visuales",icon:$,color:"purple",defaultOpen:!1,children:[e.jsx(y,{label:"Hide Steering Wheel",value:d.HIDE_STEER==="1",description:"Ocultar volante virtual",onChange:l=>t("GENERAL","HIDE_STEER",l?"1":"0")}),e.jsx(y,{label:"Hide Arms",value:d.HIDE_ARMS==="1",description:"Ocultar brazos del piloto",onChange:l=>t("GENERAL","HIDE_ARMS",l?"1":"0")}),e.jsx(y,{label:"Lock Steer Animation",value:d.LOCK_STEER==="1",description:"Bloquear animaciÃ³n del volante",onChange:l=>t("GENERAL","LOCK_STEER",l?"1":"0")})]}),e.jsxs(v,{title:"CÃ¡mara Chase (Exterior)",icon:De,color:"orange",defaultOpen:!1,children:[e.jsx(i,{label:"Field of View",value:Number(c.FOV||30),min:20,max:80,step:1,unit:"Â°",onChange:l=>t("CHASE","FOV",String(l)),color:"orange"}),e.jsx(i,{label:"Distance",value:Math.round(Number(c.DISTANCE||5)*10),min:20,max:150,step:5,unit:"dm",onChange:l=>t("CHASE","DISTANCE",(l/10).toFixed(1)),color:"orange"}),e.jsx(i,{label:"Height",value:Math.round(Number(c.HEIGHT||1.5)*10),min:5,max:50,step:1,unit:"dm",onChange:l=>t("CHASE","HEIGHT",(l/10).toFixed(1)),color:"orange"})]}),e.jsxs(v,{title:"CÃ¡mara Hood (CapÃ³)",icon:xe,color:"yellow",defaultOpen:!1,children:[e.jsx(i,{label:"Field of View",value:Number(s.FOV||56),min:30,max:100,step:1,unit:"Â°",onChange:l=>t("HOOD","FOV",String(l)),color:"yellow"}),e.jsx(i,{label:"Height",value:Math.round(Number(s.HEIGHT||.8)*100),min:0,max:200,step:10,onChange:l=>t("HOOD","HEIGHT",(l/100).toFixed(2)),color:"yellow"})]})]})},D=()=>{const r=m.RACE||{},c=m.BOT||m.AI||{};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(v,{title:"ConfiguraciÃ³n de SesiÃ³n",icon:fe,color:"red",children:[e.jsx(i,{label:"AI Opponents",value:Number(r.AI_OPPONENTS||7),min:0,max:30,step:1,unit:"",onChange:s=>t("RACE","AI_OPPONENTS",String(s)),color:"red"}),e.jsx(i,{label:"Race Laps",value:Number(r.LAPS||5),min:1,max:100,step:1,unit:"",onChange:s=>t("RACE","LAPS",String(s)),color:"red"}),e.jsx(i,{label:"Practice Minutes",value:Number(r.PRACTICE_TIME||10),min:0,max:60,step:5,unit:" min",onChange:s=>t("RACE","PRACTICE_TIME",String(s)),color:"red"}),e.jsx(i,{label:"Qualify Minutes",value:Number(r.QUALIFY_TIME||10),min:0,max:30,step:5,unit:" min",onChange:s=>t("RACE","QUALIFY_TIME",String(s)),color:"red"}),e.jsx(y,{label:"Rolling Start",value:r.ROLLING_START==="1",description:"Salida lanzada en movimiento",onChange:s=>t("RACE","ROLLING_START",s?"1":"0")}),e.jsx(y,{label:"Jump Start Penalty",value:r.JUMP_START==="1",description:"PenalizaciÃ³n por salida anticipada",onChange:s=>t("RACE","JUMP_START",s?"1":"0")})]}),e.jsxs(v,{title:"ConfiguraciÃ³n de IA",icon:je,color:"orange",defaultOpen:!1,children:[e.jsx(i,{label:"AI Level (Difficulty)",value:Number(c.LEVEL||95),min:70,max:100,step:1,onChange:s=>t("BOT","LEVEL",String(s)),color:"orange"}),e.jsx(i,{label:"AI Aggression",value:Number(c.AGGRESSION||50),min:0,max:100,step:5,onChange:s=>t("BOT","AGGRESSION",String(s)),color:"orange"}),e.jsx(i,{label:"AI Strength Variation",value:Number(c.STRENGTH_VARIATION||0),min:0,max:30,step:1,onChange:s=>t("BOT","STRENGTH_VARIATION",String(s)),color:"orange"}),e.jsx(y,{label:"Unique AI Personalities",value:c.UNIQUE==="1",description:"Cada IA tiene diferentes caracterÃ­sticas",onChange:s=>t("BOT","UNIQUE",s?"1":"0")})]})]})},K=()=>{const r=m.WEATHER||{},c=m.DYNAMIC_TIME||m.TIME||{},s=m.LIGHTING||{};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(v,{title:"Condiciones MeteorolÃ³gicas",icon:z,color:"blue",children:[e.jsx(k,{label:"Weather Type",value:r.NAME??"sol_01_CLear",options:[{value:"sol_01_CLear",label:"â˜€ï¸ Clear - Despejado"},{value:"sol_02_FewClouds",label:"ðŸŒ¤ï¸ Few Clouds - Pocas Nubes"},{value:"sol_03_ScatteredClouds",label:"â›… Scattered Clouds - Nubes Dispersas"},{value:"sol_04_BrokenClouds",label:"ðŸŒ¥ï¸ Broken Clouds - Nublado Parcial"},{value:"sol_05_Overcast",label:"â˜ï¸ Overcast - Cubierto"},{value:"sol_06_Mist",label:"ðŸŒ«ï¸ Mist - Neblina"},{value:"sol_07_Fog",label:"ðŸŒ Fog - Niebla Densa"},{value:"sol_10_LightRain",label:"ðŸŒ¦ï¸ Light Rain - Lluvia Ligera"},{value:"sol_11_Rain",label:"ðŸŒ§ï¸ Rain - Lluvia"},{value:"sol_12_HeavyRain",label:"â›ˆï¸ Heavy Rain - Lluvia Fuerte"},{value:"sol_13_Thunderstorm",label:"ðŸŒ©ï¸ Thunderstorm - Tormenta"}],onChange:d=>t("WEATHER","NAME",d)}),e.jsx(i,{label:"Ambient Temperature",value:Number(r.AMBIENT||22),min:-10,max:45,step:1,unit:"Â°C",onChange:d=>t("WEATHER","AMBIENT",String(d)),color:"blue"}),e.jsx(i,{label:"Track Temperature",value:Number(r.ROAD||30),min:0,max:60,step:1,unit:"Â°C",onChange:d=>t("WEATHER","ROAD",String(d)),color:"blue"}),e.jsx(i,{label:"Wind Speed",value:Number(r.WIND_SPEED||5),min:0,max:50,step:1,unit:" km/h",onChange:d=>t("WEATHER","WIND_SPEED",String(d)),color:"blue"}),e.jsx(i,{label:"Wind Direction",value:Number(r.WIND_DIRECTION||0),min:0,max:359,step:15,unit:"Â°",onChange:d=>t("WEATHER","WIND_DIRECTION",String(d)),color:"blue"})]}),e.jsxs(v,{title:"Hora del DÃ­a",icon:Se,color:"yellow",defaultOpen:!1,children:[e.jsx(i,{label:"Start Hour",value:Number(c.START_TIME||12),min:0,max:23,step:1,unit:":00",onChange:d=>t("DYNAMIC_TIME","START_TIME",String(d)),color:"yellow"}),e.jsx(i,{label:"Time Multiplier",value:Number(c.TIME_MULT||1),min:0,max:60,step:1,unit:"x",onChange:d=>t("DYNAMIC_TIME","TIME_MULT",String(d)),color:"yellow"}),e.jsx(y,{label:"Dynamic Time",value:c.ENABLED==="1",description:"El tiempo avanza durante la sesiÃ³n",onChange:d=>t("DYNAMIC_TIME","ENABLED",d?"1":"0")})]}),e.jsxs(v,{title:"Condiciones de Pista",icon:xe,color:"green",defaultOpen:!1,children:[e.jsx(i,{label:"Track Grip %",value:Number(r.TRACK_GRIP||98),min:80,max:100,step:1,onChange:d=>t("WEATHER","TRACK_GRIP",String(d)),color:"green"}),e.jsx(k,{label:"Track State",value:r.TRACK_STATE??"green",options:[{value:"green",label:"ðŸŸ¢ Green - Pista Limpia"},{value:"fast",label:"ðŸ”µ Fast - Pista RÃ¡pida"},{value:"optimum",label:"ðŸŸ¡ Optimum - Pista Ã“ptima"},{value:"dusty",label:"ðŸŸ  Dusty - Pista Polvorienta"},{value:"old",label:"ðŸ”´ Old - Pista Desgastada"}],onChange:d=>t("WEATHER","TRACK_STATE",d)})]}),e.jsxs(v,{title:"IluminaciÃ³n",icon:$,color:"purple",defaultOpen:!1,children:[e.jsx(i,{label:"Saturation",value:Number(s.SATURATION||100),min:0,max:150,step:5,onChange:d=>t("LIGHTING","SATURATION",String(d)),color:"purple"}),e.jsx(i,{label:"Brightness",value:Number(s.BRIGHTNESS||100),min:50,max:150,step:5,onChange:d=>t("LIGHTING","BRIGHTNESS",String(d)),color:"purple"})]})]})},W=()=>e.jsx("div",{className:"space-y-4",children:Object.entries(m).map(([r,c])=>e.jsx(v,{title:r,icon:J,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(c).map(([s,d])=>e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase mb-1",children:s}),e.jsx("input",{className:"w-full px-4 py-2 rounded-xl border border-gray-600 bg-gray-900 text-white text-sm focus:border-blue-500 outline-none",value:d,onChange:l=>t(r,s,l.target.value)})]},s))})},r))});return e.jsxs("div",{className:"space-y-4",children:[n&&e.jsxs("div",{className:"flex items-center justify-between p-4 glass-card border-l-4 border-blue-500 animate-slide-up",children:[e.jsxs("p",{className:"text-sm text-gray-300",children:[e.jsx("span",{className:"font-bold text-blue-400",children:"Cambios sin guardar"})," â€” Recuerda aplicar tus cambios"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:B,className:"px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300 text-sm font-bold flex items-center gap-2 transition-colors",children:[e.jsx(ra,{size:16}),"Descartar"]}),e.jsxs("button",{onClick:H,disabled:w.isPending,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white text-sm font-bold flex items-center gap-2 transition-all shadow-lg shadow-blue-500/25 disabled:opacity-50",children:[e.jsx(Ie,{size:16}),w.isPending?"Guardando...":"Guardar Cambios"]})]})]}),M()]})}const ae=[{id:"controls",name:"Controles",icon:le,color:"text-blue-500"},{id:"gameplay",name:"Ayudas / Gameplay",icon:ia,color:"text-orange-500"},{id:"video",name:"GrÃ¡ficos",icon:he,color:"text-purple-500"},{id:"audio",name:"Audio",icon:ye,color:"text-green-500"},{id:"camera",name:"CÃ¡mara",icon:te,color:"text-cyan-500"},{id:"race",name:"IA / Carrera",icon:fe,color:"text-red-500"},{id:"weather",name:"Clima",icon:z,color:"text-yellow-500"}];function $a(){const p=re(),[u,h]=j.useState("branding"),[f,N]=Ce(),n=ha();j.useEffect(()=>{const a=f.get("tab");a&&["branding","stations","game","logs","ads","database","pricing"].includes(a)&&h(a)},[f]);const g=a=>{h(a),N({tab:a})},S=P({mutationFn:async({id:a,action:E})=>{await _.post(`${R}/stations/${a}/${E}`)},onSuccess:()=>alert("Comando enviado")}),I=P({mutationFn:async a=>{await _.get(`${R}/control/station/${a}/content`)},onSuccess:()=>{alert("Escaneo de contenido iniciado. Los coches y pistas aparecerÃ¡n en unos segundos."),p.invalidateQueries({queryKey:["stations"]})},onError:()=>alert("Error al escanear contenido. Â¿EstÃ¡ el agente conectado?")}),x=async()=>{try{const a=localStorage.getItem("token"),E=await _.get(`${R}/backup/export`,{headers:{Authorization:`Bearer ${a}`},responseType:"blob"}),L=window.URL.createObjectURL(new Blob([E.data])),V=document.createElement("a");V.href=L,V.setAttribute("download",`backup_${new Date().toISOString()}.json`),document.body.appendChild(V),V.click(),V.remove()}catch(a){console.error(a),alert("Error al exportar backup")}},w=async a=>{const E=a.target.files?.[0];if(!E||!confirm("ADVERTENCIA: Restaurar una copia de seguridad BORRARÃ todos los datos actuales (Eventos, Pilotos, Resultados). Â¿EstÃ¡s seguro?"))return;const L=new FormData;L.append("file",E);const V=localStorage.getItem("token");try{await _.post(`${R}/backup/import`,L,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${V}`}}),alert("Base de datos restaurada correctamente. Se recomienda recargar la pÃ¡gina."),window.location.reload()}catch(Ee){console.error(Ee),alert("Error al restaurar backup")}},{data:m}=U({queryKey:["settings"],queryFn:async()=>{try{const a=await _.get(`${R}/settings/`);return Array.isArray(a.data)?a.data:[]}catch{return[]}},initialData:[]}),t=P({mutationFn:async a=>await _.post(`${R}/settings/`,a),onSuccess:()=>p.invalidateQueries({queryKey:["settings"]})}),H=j.useRef(null),B=async a=>{const E=a.target.files?.[0];if(!E)return;const L=new FormData;L.append("file",E);try{await _.post(`${R}/settings/upload-logo`,L,{headers:{"Content-Type":"multipart/form-data"}}),p.invalidateQueries({queryKey:["settings"]})}catch{alert("Error al subir logo")}},{data:M}=U({queryKey:["stations"],queryFn:we}),[b,T]=j.useState(null),[O,G]=j.useState({name:"",ip:"",ac_path:""}),q=P({mutationFn:({id:a,data:E})=>Re(a,E),onSuccess:()=>{p.invalidateQueries({queryKey:["stations"]}),T(null)}}),[D,K]=j.useState(ae[0].id),[W,r]=j.useState(!1),[c,s]=j.useState(""),[d,l]=j.useState({}),[o,Y]=j.useState([]),{data:Q}=U({queryKey:["config_profiles"],queryFn:async()=>(await _.get(`${R}/configs/profiles`)).data}),Z=P({mutationFn:async()=>{if(Object.keys(d).length===0)throw new Error("Selecciona perfiles");await _.post(`${R}/configs/deploy`,{deploy_map:d,station_ids:o.length>0?o:null})},onSuccess:()=>{const a=o.length>0?`Despliegue iniciado a ${o.length} estaciÃ³n(es)`:"Despliegue iniciado a TODAS las estaciones";alert(a)},onError:a=>alert(a instanceof Error?a.message:"Error en despliegue")}),ve=a=>{s(a.replace(".ini","")),r(!0)},F=Array.isArray(m)?m:[],Ne=F.find(a=>a.key==="bar_name")?.value||"VRacing Bar",ne=F.find(a=>a.key==="bar_logo")?.value||"/logo.png";return e.jsxs("div",{className:"h-full flex flex-col bg-gray-950 text-white font-sans overflow-hidden",children:[e.jsxs("div",{className:"flex-none p-8 pb-4 flex justify-between items-center border-b border-gray-800 bg-gray-900/50 backdrop-blur-sm",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black uppercase tracking-tight flex items-center",children:[e.jsx(Ae,{className:"mr-3 text-blue-500"}),"ConfiguraciÃ³n"]}),e.jsx("p",{className:"text-gray-400 text-sm font-medium mt-1",children:"GestiÃ³n integral del sistema y simuladores"})]}),e.jsx("div",{className:"flex bg-gray-800 p-1.5 rounded-2xl border border-gray-700 shadow-sm",children:[{id:"branding",label:"Marca y TV",icon:me},{id:"ads",label:"Promociones",icon:Le},{id:"pricing",label:"Precios",icon:ce},{id:"game",label:"Editor AC",icon:le},{id:"stations",label:"Simuladores",icon:oe},{id:"logs",label:"Logs Sistema",icon:se},{id:"database",label:"Base de Datos",icon:X}].map(a=>e.jsxs("button",{onClick:()=>g(a.id),className:C("flex items-center space-x-2 px-5 py-2.5 rounded-xl text-sm font-black transition-all uppercase tracking-wide",u===a.id?"bg-gray-700 shadow-lg text-blue-400 border border-gray-600":"text-gray-500 hover:text-gray-300"),children:[e.jsx(a.icon,{size:16}),e.jsx("span",{children:a.label})]},a.id))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:[u==="branding"&&e.jsxs("div",{className:"max-w-5xl space-y-8 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-gray-800 p-8 rounded-3xl border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-black text-white uppercase mb-6 flex items-center",children:[e.jsx(me,{className:"mr-2 text-blue-400"})," Identidad"]}),e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Nombre del Local"}),e.jsx("input",{className:"w-full p-4 rounded-xl bg-gray-900 border border-gray-700 text-white font-bold outline-none focus:border-blue-500 transition-all",defaultValue:Ne,onBlur:a=>t.mutate({key:"bar_name",value:a.target.value})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Logo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:ne,className:"h-16 w-16 object-contain bg-gray-900 rounded-lg p-2",onError:a=>{a.currentTarget.src="/logo.png"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{className:"w-full p-3 rounded-xl bg-gray-900 border border-gray-700 text-xs font-mono text-gray-400 mb-2",defaultValue:ne,onBlur:a=>t.mutate({key:"bar_logo",value:a.target.value})}),e.jsx("button",{onClick:()=>H.current?.click(),className:"text-xs bg-gray-700 text-white px-3 py-1.5 rounded-lg hover:bg-gray-600 uppercase font-bold",children:"Subir Archivo"}),e.jsx("input",{type:"file",hidden:!0,ref:H,onChange:B,accept:"image/*"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-800 p-8 rounded-3xl border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-black text-white uppercase mb-6 flex items-center",children:[e.jsx(de,{className:"mr-2 text-yellow-400"})," Ticker Noticias"]}),e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Mensaje Promocional"}),e.jsx("textarea",{className:"w-full p-4 rounded-xl bg-gray-900 border border-gray-700 text-white font-bold outline-none focus:border-yellow-500 transition-all min-h-[100px]",defaultValue:F.find(a=>a.key==="promo_text")?.value,onBlur:a=>t.mutate({key:"promo_text",value:a.target.value})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-gray-400",children:"Velocidad"}),e.jsx("input",{type:"range",min:"20",max:"200",className:"w-1/2 accent-yellow-500",defaultValue:F.find(a=>a.key==="ticker_speed")?.value||80,onChange:a=>t.mutate({key:"ticker_speed",value:a.target.value})})]})]})]}),e.jsxs("div",{className:"bg-gray-800 p-8 rounded-3xl border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-black text-white uppercase mb-6 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-400"})," Acceso PÃºblico (QR)"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"URL PÃºblica"}),e.jsx("input",{className:"w-full p-4 rounded-xl bg-gray-900 border border-gray-700 font-mono text-sm text-blue-300",defaultValue:F.find(a=>a.key==="bar_public_url")?.value,onBlur:a=>t.mutate({key:"bar_public_url",value:a.target.value})}),e.jsx("button",{onClick:()=>t.mutate({key:"bar_public_url",value:`${window.location.protocol}//${window.location.hostname}:${window.location.port}/mobile`}),className:"mt-2 text-xs text-blue-500 hover:text-blue-400 font-bold uppercase underline",children:"Usar IP Local Detectada"})]}),e.jsxs("div",{className:"flex items-center space-x-3 bg-gray-900 p-4 rounded-xl border border-gray-700",children:[e.jsx(Pe,{className:"text-white",size:32}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Mostrar en TV"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-500",defaultChecked:F.find(a=>a.key==="show_qr")?.value==="true",onChange:a=>t.mutate({key:"show_qr",value:a.target.checked?"true":"false"})})]})]})]})]}),e.jsxs("div",{className:"bg-gray-800 p-8 rounded-3xl border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-black text-white uppercase mb-6 flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-purple-400"})," Notificaciones Push"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-300",children:"Recibir alertas de nuevos rÃ©cords y eventos"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[!n.isSupported&&"Tu navegador no soporta notificaciones push",n.isSupported&&n.permission==="denied"&&"Permisos denegados - activa en config del navegador",n.isSupported&&n.permission!=="denied"&&(n.isSubscribed?"Suscrito âœ“":"Click para activar")]})]}),e.jsx("button",{onClick:()=>n.isSubscribed?n.unsubscribe():n.subscribe(),disabled:!n.isSupported||n.loading||n.permission==="denied",className:C("relative w-14 h-7 rounded-full transition-colors",n.isSubscribed?"bg-purple-500":"bg-gray-600",(!n.isSupported||n.permission==="denied")&&"opacity-50 cursor-not-allowed"),children:e.jsx("div",{className:C("absolute top-1 left-1 w-5 h-5 rounded-full bg-white transition-transform",n.isSubscribed&&"translate-x-7")})})]})]})]}),u==="pricing"&&e.jsx("div",{className:"max-w-2xl animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-3xl border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-black text-white uppercase mb-6 flex items-center",children:[e.jsx(ce,{className:"mr-2 text-green-400"})," ConfiguraciÃ³n de Precios"]}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Define las tarifas base por tiempo. El sistema calcularÃ¡ automÃ¡ticamente el precio."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Precio Base (15 Minutos)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3.5 text-gray-400",children:"â‚¬"}),e.jsx("input",{type:"number",step:"0.5",className:"w-full p-3 pl-8 rounded-xl bg-gray-900 border border-gray-700 text-white font-bold outline-none focus:border-green-500 transition-all text-lg",defaultValue:F.find(a=>a.key==="pricing_base_15min")?.value||"5.0",onBlur:a=>t.mutate({key:"pricing_base_15min",value:a.target.value})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tarifa estÃ¡ndar para simuladores de pantalla normal."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Recargo VR (por 15 Minutos)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3.5 text-gray-400",children:"+ â‚¬"}),e.jsx("input",{type:"number",step:"0.5",className:"w-full p-3 pl-10 rounded-xl bg-gray-900 border border-gray-700 text-white font-bold outline-none focus:border-purple-500 transition-all text-lg",defaultValue:F.find(a=>a.key==="pricing_vr_surcharge")?.value||"2.0",onBlur:a=>t.mutate({key:"pricing_vr_surcharge",value:a.target.value})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Costo adicional que se suma al precio base si se usa VR."})]})]})]})}),u==="stations"&&e.jsxs("div",{className:"grid gap-4 max-w-5xl animate-in fade-in duration-300",children:[(!M||M.length===0)&&e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-2xl p-12 text-center",children:[e.jsx(oe,{className:"w-16 h-16 text-gray-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-400 mb-2",children:"No se detectan estaciones"}),e.jsx("p",{className:"text-gray-600",children:"AsegÃºrate de que el agente (client.py) estÃ© ejecutÃ¡ndose en los simuladores."})]}),Array.isArray(M)&&M.map(a=>e.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl border border-gray-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:C("p-4 rounded-xl",a.is_online?"bg-green-500/10 text-green-400":"bg-gray-700/50 text-gray-500"),children:a.is_online?e.jsx(pa,{size:24}):e.jsx(Me,{size:24})}),e.jsx("div",{children:b===a.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{value:O.name,onChange:E=>G({...O,name:E.target.value}),className:"bg-gray-900 text-white font-bold p-2 rounded-lg border border-blue-500 outline-none w-full",placeholder:"Nombre estaciÃ³n",autoFocus:!0}),e.jsx("input",{value:O.ip,onChange:E=>G({...O,ip:E.target.value}),className:"bg-gray-900 text-white p-2 rounded-lg border border-blue-500 outline-none w-full text-xs font-mono",placeholder:"IP Address (ej. 192.168.1.50)"}),e.jsx("input",{value:O.ac_path,onChange:E=>G({...O,ac_path:E.target.value}),className:"bg-gray-900 text-white p-2 rounded-lg border border-blue-500 outline-none w-full text-[10px] font-mono",placeholder:"Ruta Assetto Corsa (ej. C:\\AC)"})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-black text-white uppercase",children:a.name}),e.jsx("button",{onClick:()=>{T(a.id),G({name:a.name,ip:a.ip_address,ac_path:a.ac_path||""})},className:"text-gray-600 hover:text-white",children:e.jsx(pe,{size:14})})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-[10px] font-mono text-gray-500 uppercase font-black tracking-widest",children:[e.jsx("span",{children:a.hostname}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:a.ip_address})]}),a.ac_path&&e.jsxs("div",{className:"text-[9px] text-gray-600 font-mono mt-1 opacity-60",children:["ðŸ“ ",a.ac_path]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:C("px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",a.status==="online"?"bg-green-500/20 text-green-400":"bg-gray-700 text-gray-500"),children:a.status}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.is_online&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>I.mutate(a.id),disabled:I.isPending,className:"p-2 bg-green-500/10 text-green-500 rounded-lg hover:bg-green-500 hover:text-white transition-all disabled:opacity-50",title:"Escanear Contenido AC",children:e.jsx(he,{size:14})}),e.jsx("button",{onClick:()=>{confirm("Â¿Reiniciar estaciÃ³n?")&&S.mutate({id:a.id,action:"restart"})},className:"p-2 bg-blue-500/10 text-blue-500 rounded-lg hover:bg-blue-500 hover:text-white transition-all",title:"Reiniciar PC",children:e.jsx(de,{size:14})}),e.jsx("button",{onClick:()=>{confirm("Â¡EMERGENCIA! Â¿Forzar cierre del juego?")&&S.mutate({id:a.id,action:"panic"})},className:"p-2 bg-yellow-500/10 text-yellow-500 rounded-lg hover:bg-yellow-500 hover:text-black transition-all",title:"BotÃ³n del PÃ¡nico (Cerrar AC)",children:e.jsx(ge,{size:14})})]}),e.jsx("button",{onClick:()=>{confirm("Â¿Apagar estaciÃ³n?")&&S.mutate({id:a.id,action:"shutdown"})},className:"p-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500 hover:text-white transition-all",title:"Apagar PC",children:e.jsx(Fe,{size:14})})]})]}),b===a.id&&e.jsx("button",{onClick:()=>q.mutate({id:a.id,data:{name:O.name,ip_address:O.ip,ac_path:O.ac_path}}),className:"bg-blue-600 p-2 rounded-lg text-white hover:bg-blue-500",children:e.jsx(Ve,{size:20})})]})]},a.id))]}),u==="game"&&e.jsx("div",{className:"max-w-6xl space-y-8 animate-in fade-in duration-300",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xs font-black text-gray-500 uppercase tracking-widest pl-2 mb-4",children:"CategorÃ­as .ini"}),ae.map(a=>e.jsx("button",{onClick:()=>K(a.id),className:C("w-full flex items-center justify-between p-4 rounded-2xl border transition-all font-bold",D===a.id?"bg-gray-800 border-blue-500/50 text-white shadow-lg":"bg-gray-900/50 border-transparent text-gray-500 hover:bg-gray-800"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{size:18,className:a.color}),e.jsx("span",{children:a.name})]})},a.id))]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsxs("div",{className:"bg-gray-800 p-8 rounded-3xl border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("h3",{className:"text-xl font-black text-white uppercase flex items-center gap-3",children:[e.jsx(Qe,{className:"text-blue-400"})," Perfiles Disponibles"]}),e.jsxs("button",{onClick:()=>{s(""),r(!0)},className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-xl text-xs font-black uppercase flex items-center gap-2 transition-all shadow-lg",children:[e.jsx(ue,{size:16})," Crear Nuevo"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Q?.[D]?.map(a=>e.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-2xl border border-gray-700 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-black uppercase text-sm",children:a.replace(".ini","")}),e.jsx("p",{className:"text-[10px] text-gray-500 font-mono mt-0.5",children:a})]}),e.jsx("button",{onClick:()=>ve(a),className:"text-gray-500 hover:text-blue-400",children:e.jsx(pe,{size:16})})]}),e.jsx("button",{onClick:()=>l(E=>({...E,[D]:a})),className:C("w-full py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border",d[D]===a?"bg-blue-500/20 text-blue-400 border-blue-500/50":"bg-gray-800 text-gray-500 border-transparent hover:border-gray-600"),children:d[D]===a?"SELECCIONADO PARA DESPLIEGUE":"SELECCIONAR"})]},a))})]}),e.jsxs("div",{className:"bg-blue-900/10 border border-blue-500/20 p-8 rounded-3xl flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-black text-white uppercase mb-2",children:"Lanzar ConfiguraciÃ³n"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Se enviarÃ¡n ",Object.keys(d).length," perfiles a",o.length>0?` ${o.length} estaciÃ³n(es)`:" TODAS las estaciones","."]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:Array.isArray(M)&&M.filter(a=>a.is_online).map(a=>e.jsx("button",{onClick:()=>Y(E=>E.includes(a.id)?E.filter(L=>L!==a.id):[...E,a.id]),className:C("px-3 py-1.5 rounded-lg text-[10px] font-black transition-all border",o.includes(a.id)?"bg-blue-600 border-blue-400 text-white":"bg-gray-800 border-gray-700 text-gray-500"),children:a.name},a.id))})]}),e.jsxs("button",{disabled:Z.isPending||Object.keys(d).length===0,onClick:()=>Z.mutate(),className:"bg-blue-600 hover:bg-blue-500 disabled:opacity-50 text-white px-8 py-4 rounded-2xl font-black uppercase tracking-widest transition-all shadow-[0_0_30px_rgba(37,99,235,0.3)] flex items-center gap-3",children:[e.jsx(be,{size:20}),Z.isPending?"DESPLEGANDO...":"DESPLEGAR AHORA"]})]})]})]})}),u==="ads"&&e.jsx("div",{className:"max-w-5xl animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-gray-900/50 p-8 rounded-3xl border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 mb-6 text-sm font-medium",children:"Gestiona la publicidad y promociones que aparecen en las pantallas del local (TV Mode)."}),e.jsx(ga,{})]})}),u==="logs"&&e.jsx("div",{className:"max-w-5xl animate-in fade-in duration-300",children:e.jsx(ba,{})}),u==="database"&&e.jsx("div",{className:"max-w-5xl animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-3xl border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-black text-white uppercase mb-6 flex items-center",children:[e.jsx(X,{className:"mr-2 text-blue-500"})," Copia de Seguridad"]}),e.jsx("p",{className:"text-gray-400 mb-8 font-medium",children:"Gestiona la integridad de tus datos. Descarga copias de seguridad regularmente."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-800 flex flex-col items-center text-center",children:[e.jsx("div",{className:"bg-blue-500/10 p-4 rounded-full mb-4",children:e.jsx(be,{className:"text-blue-500",size:32})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Exportar Datos"}),e.jsx("p",{className:"text-gray-500 text-xs mb-6",children:"Descarga un archivo JSON con todos los eventos, pilotos, resultados y configuraciones."}),e.jsx("button",{onClick:x,className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl transition-colors",children:"DESCARGAR BACKUP"})]}),e.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-800 flex flex-col items-center text-center",children:[e.jsx("div",{className:"bg-orange-500/10 p-4 rounded-full mb-4",children:e.jsx(X,{className:"text-orange-500",size:32})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Restaurar Datos"}),e.jsxs("p",{className:"text-gray-500 text-xs mb-6",children:["Restaura el sistema desde un archivo. ",e.jsx("span",{className:"text-red-400 font-bold",children:"ESTO BORRARÃ LOS DATOS ACTUALES."})]}),e.jsxs("label",{className:"w-full bg-gray-800 hover:bg-gray-700 text-white font-bold py-3 rounded-xl transition-colors cursor-pointer border border-gray-700 hover:border-gray-500",children:["SELECCIONAR ARCHIVO",e.jsx("input",{type:"file",hidden:!0,onChange:w,accept:".json"})]})]})]})]})})]}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-8 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-gray-900 w-full max-w-4xl h-full max-h-[90vh] rounded-3xl border border-gray-800 flex flex-col shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-black text-white uppercase",children:["Editor de ",ae.find(a=>a.id===D)?.name]}),e.jsx("button",{onClick:()=>r(!1),children:e.jsx(ue,{className:"rotate-45 text-gray-500 hover:text-white",size:28})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto flex-1 bg-gray-950",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Nombre del perfil"}),e.jsx("input",{value:c,onChange:a=>s(a.target.value),className:"w-full text-xl font-bold bg-transparent border-b border-gray-700 focus:border-blue-500 outline-none text-white mb-8 pb-2",placeholder:"Nombre del perfil..."}),c&&e.jsx(ya,{category:D,profileName:`${c}.ini`})]})]})})]})}export{$a as default};
