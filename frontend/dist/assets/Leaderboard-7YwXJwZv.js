import{c as Y,d as Z,r,u as T,j as e,b as ee,T as te,A as $,a as V}from"./index-MjGtIaAt.js";import{c as U}from"./utils-BykweIWy.js";import{Q as se}from"./index-BPWuL58u.js";import{u as ae}from"./useMutation-Ckz2NycH.js";import{u as re,g as le}from"./telemetry-bBsdFDJe.js";import{A as oe}from"./index-FSCaKcAl.js";import{m as X}from"./proxy-CbfoYm00.js";import{C as ne}from"./clock-DpL4IKBu.js";import{X as G}from"./x-CyrpJdpA.js";import{M as H}from"./map-pin-BuEIuJfX.js";import{C as Q}from"./car-Bto1fEN0.js";import{C as ie}from"./check-DDMqjJty.js";import{T as ce}from"./TelemetryChart-CrKbnasX.js";import{E as de}from"./EloBadge-DKwebwV0.js";import{T as xe}from"./triangle-alert-ko4KflD0.js";import{A as J}from"./activity-d8XIJMYL.js";import{R as me}from"./refresh-cw-DQN2a5yv.js";import"./clsx-B-dksMZM.js";import"./loader-circle-DSpMC2cv.js";import"./trending-up-BHF8h5rZ.js";import"./gauge-BmF6m-rA.js";import"./CartesianChart-byA6CRUy.js";import"./LineChart-BAS0o-Op.js";import"./getRadiusAndStrokeWidthFromDot-hhzSCn0X.js";import"./YAxis-hjvaWDO6.js";import"./Tooltip-BKNbpHsn.js";import"./Legend-DL5FTiQX.js";import"./AreaChart-B6ltY9AV.js";import"./graphicalItemSelectors-DfVAs9is.js";import"./timer-CamBLO3n.js";const pe=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],ue=Y("chart-no-axes-column",pe);const ge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],he=Y("circle-plus",ge);function be({isOpen:o,onClose:d,preselectedTrack:a}){const l=Z(),[x,g]=r.useState(""),[y,w]=r.useState(""),[E,O]=r.useState(!1),[h,v]=r.useState(""),[b,_]=r.useState(a),[j,m]=r.useState(""),[N,i]=r.useState(""),[k,z]=r.useState(""),[f,p]=r.useState("");r.useEffect(()=>{_(a)},[a]);const{data:S}=T({queryKey:["drivers"],queryFn:le}),c=ae({mutationFn:re,onSuccess:()=>{l.invalidateQueries({queryKey:["leaderboard"]}),l.invalidateQueries({queryKey:["drivers"]}),l.invalidateQueries({queryKey:["combinations"]}),d(),m(""),i(""),z(""),p("")},onError:()=>{p("Error al guardar el tiempo. IntÃ©ntelo de nuevo.")}}),P=async s=>{if(s.preventDefault(),p(""),!j||!N||!k){p("Por favor ingrese el tiempo completo");return}const C=E?y:x;if(!C||!h||!b){p("Todos los campos son obligatorios");return}const R=parseInt(j)*6e4+parseInt(N)*1e3+parseInt(k),L={station_id:1,track_name:b,track_config:"manual",car_model:h,driver_name:C,session_type:"practice",date:new Date().toISOString(),best_lap:R,laps:[{driver_name:C,car_model:h,track_name:b,lap_time:R,sectors:[],telemetry_data:null,is_valid:!0,timestamp:new Date().toISOString()}]};c.mutate(L)};return o?e.jsx(oe,{children:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx(X.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:d,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),e.jsxs(X.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-gray-900 border border-gray-700 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden relative z-10",children:[e.jsxs("div",{className:"bg-gray-800 px-6 py-4 flex justify-between items-center border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(ne,{className:"text-blue-500",size:20}),e.jsx("h2",{className:"font-bold text-lg uppercase tracking-wider",children:"Registrar Tiempo Manual"})]}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(G,{size:24})})]}),e.jsxs("form",{onSubmit:P,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(ee,{size:12}),"Piloto"]}),E?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:y,onChange:s=>w(s.target.value),placeholder:"Nombre del Piloto",className:"flex-1 bg-gray-950 border border-blue-500/50 rounded-lg px-4 py-2 text-white focus:border-blue-500 outline-none",autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>O(!1),className:"text-gray-400 hover:text-white",children:e.jsx(G,{size:20})})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:x,onChange:s=>g(s.target.value),className:"flex-1 bg-gray-950 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-blue-500 outline-none",children:[e.jsx("option",{value:"",children:"Seleccionar Piloto..."}),Array.isArray(S)&&S.map(s=>e.jsx("option",{value:s.driver_name,children:s.driver_name},s.driver_name))]}),e.jsx("button",{type:"button",onClick:()=>O(!0),className:"bg-gray-800 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-gray-700 border border-gray-700",children:"+ NUEVO"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(H,{size:12}),"Circuito"]}),e.jsx("input",{type:"text",value:b,onChange:s=>_(s.target.value),placeholder:"Ej: Monza",className:"w-full bg-gray-950 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-blue-500 outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(Q,{size:12}),"Coche"]}),e.jsx("input",{type:"text",value:h,onChange:s=>v(s.target.value),placeholder:"Ej: Ferrari SF24",className:"w-full bg-gray-950 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-blue-500 outline-none"})]})]}),e.jsxs("div",{className:"bg-gray-950 p-4 rounded-xl border border-gray-800",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest block mb-3 text-center",children:"TIEMPO DE VUELTA"}),e.jsxs("div",{className:"flex items-end justify-center gap-2",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("input",{type:"number",value:j,onChange:s=>m(s.target.value),placeholder:"0",className:"w-16 h-16 text-center text-3xl font-mono font-black bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-blue-500 outline-none"}),e.jsx("span",{className:"text-[10px] text-gray-500 mt-1 uppercase",children:"Min"})]}),e.jsx("span",{className:"text-2xl font-black text-gray-600 mb-4",children:":"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("input",{type:"number",value:N,onChange:s=>i(s.target.value),placeholder:"00",className:"w-16 h-16 text-center text-3xl font-mono font-black bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-blue-500 outline-none"}),e.jsx("span",{className:"text-[10px] text-gray-500 mt-1 uppercase",children:"Seg"})]}),e.jsx("span",{className:"text-2xl font-black text-gray-600 mb-4",children:"."}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("input",{type:"number",value:k,onChange:s=>z(s.target.value),placeholder:"000",className:"w-20 h-16 text-center text-3xl font-mono font-black bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-blue-500 outline-none"}),e.jsx("span",{className:"text-[10px] text-gray-500 mt-1 uppercase",children:"Mil"})]})]})]}),f&&e.jsx("div",{className:"text-red-500 text-xs font-bold text-center bg-red-500/10 py-2 rounded",children:f}),e.jsx("button",{type:"submit",disabled:c.isPending,className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl transition-all uppercase tracking-widest flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:c.isPending?e.jsx("span",{className:"animate-pulse",children:"Guardando..."}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:18,strokeWidth:3}),"Guardar Tiempo"]})})]})]})]})}):null}const fe=async(o,d,a)=>{const l=new URLSearchParams;return o&&o!=="all"&&l.append("track_name",o),d&&l.append("car_model",d),a&&l.append("period",a),(await V.get(`${$}/telemetry/leaderboard?${l.toString()}`)).data},ye=async()=>(await V.get(`${$}/telemetry/combinations`)).data,K=o=>{const d=Math.floor(o/6e4),a=Math.floor(o%6e4/1e3),l=o%1e3;return`${d}:${a.toString().padStart(2,"0")}.${l.toString().padStart(3,"0")}`},ve=o=>o===0?"-":`+${(o/1e3).toFixed(3)}`,je=({track:o})=>{const[d,a]=r.useState(`/maps/${o}.png`),[l,x]=r.useState(!1),[g,y]=r.useState(!0),w=()=>{l?y(!1):(x(!0),a(`${$}/telemetry/map/${o}`))};return g?e.jsx("img",{src:d,onError:w,className:"w-full h-full object-contain opacity-80 group-hover:opacity-100 transition-all filter drop-shadow-[0_0_20px_rgba(255,255,255,0.05)]",alt:"Circuit Map"}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-600 opacity-50 border-2 border-dashed border-gray-700 rounded-xl",children:[e.jsx(H,{size:48,className:"mb-2"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Mapa no disponible"})]})};function Ze(){const o=new URLSearchParams(window.location.search),d=o.get("screen")||"1",a=location.pathname.startsWith("/tv")||o.get("tv")==="true",[l]=r.useState("Monza"),[x]=r.useState(null),[g,y]=r.useState("all"),[w,E]=r.useState(0),[O,h]=r.useState(!1),[v,b]=r.useState(null),[_,j]=r.useState(null),{data:m}=T({queryKey:["combinations"],queryFn:ye,refetchInterval:6e4});r.useEffect(()=>{if(!m||m.length===0||!a)return;const t=setInterval(()=>{E(n=>(n+1)%m.length)},15e3);return()=>clearInterval(t)},[m,a]);const N=a&&m&&m.length>0?m[w].track_name:l,{data:i,isLoading:k,error:z}=T({queryKey:["leaderboard",N,a?null:x,g],queryFn:()=>fe(N,a?null:x,g),refetchInterval:5e3}),f=r.useRef(null);r.useEffect(()=>{if(!a||!i||i.length===0)return;const t=i[0],n=`${t.driver_name}-${t.lap_time}-${l}`;if(f.current===null){f.current=n;return}if(f.current!==n){f.current=n;const A=M=>{const q=Math.floor(M/6e4),F=Math.floor(M%6e4/1e3),W=M%1e3;let D="";return q>0&&(D+=`${q} minuto${q>1?"s":""} `),F>0&&(D+=`${F} segundo${F!==1?"s":""} `),W>0&&(D+=`y ${W} milÃ©simas`),D},I=new SpeechSynthesisUtterance;I.text=`Â¡AtenciÃ³n pilotos! Tenemos un nuevo rÃ©cord en ${l}. ${t.driver_name} se ha puesto primero con un tiempo de ${A(t.lap_time)}.`,I.lang="es-ES",I.rate=1.1;const B=window.speechSynthesis.getVoices().find(M=>M.lang.includes("es"));B&&(I.voice=B),window.speechSynthesis.cancel(),window.speechSynthesis.speak(I)}},[i,a,l]);const p=[{id:"all",label:"HistÃ³rico"},{id:"month",label:"Mes Actual"},{id:"week",label:"Semana"},{id:"today",label:"Hoy"}],{data:S}=T({queryKey:["settings"],queryFn:async()=>{try{const t=await V.get(`${$}/settings`);return Array.isArray(t.data)?t.data:[]}catch{return[]}},initialData:[]}),{data:c}=T({queryKey:["stats"],queryFn:async()=>(await V.get(`${$}/telemetry/stats`)).data,refetchInterval:3e4}),P=Array.isArray(S)?S:[],s=(t,n)=>P.find(A=>A.key===t)?.value||n,C=s("ticker_speed","80"),R=s("promo_text","BUSCAMOS AL PILOTO MÃS RÃPIDO DEL MES"),L=s(`news_urgent_${d}`,""),u=[];return L&&u.push(`âš¡ ÃšLTIMA HORA: ${L.toUpperCase()} âš¡`),u.push(`ðŸ† RÃ‰CORD DE PISTA: ${i?.[0]?`${i[0].driver_name} (${K(i[0].lap_time)})`:"VACANTE"}`,`ðŸ“ CIRCUITO: ${(l||"").toUpperCase()}`,"ðŸŒ¡ï¸ ESTADO POSIBLE: PISTA Ã“PTIMA"),s("show_stats_driver","true")==="true"&&c?.top_driver&&u.push(`ðŸ¥‡ PILOTO MÃS ACTIVO: ${c.top_driver}`),s("show_stats_track","true")==="true"&&c?.most_popular_track&&u.push(`ðŸ”¥ PISTA MÃS JUGADA: ${(c.most_popular_track||"").toUpperCase()}`),s("show_stats_car","true")==="true"&&c?.most_popular_car&&u.push(`ðŸŽï¸ COCHE FAVORITO: ${(c.most_popular_car||"").replace(/_/g," ").toUpperCase()}`),s("show_stats_sessions","true")==="true"&&c?.total_sessions>0&&u.push(`ðŸ“Š TOTAL SESIONES: ${c.total_sessions}`),s("show_stats_latest","true")==="true"&&c?.latest_record&&u.push(`ðŸ†• ÃšLTIMO RÃ‰CORD: ${c.latest_record}`),s("show_promo","true")==="true"&&u.push(`ðŸ“¢ PRÃ“XIMO EVENTO: ${(R||"").toUpperCase()}`),e.jsxs("div",{className:"h-full flex flex-col bg-gray-900 text-white overflow-hidden",style:{"--marquee-duration":`${C}s`},children:[z&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/90 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-8 rounded-2xl max-w-md text-center",children:[e.jsx(xe,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Error de ConexiÃ³n"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"No se ha podido cargar el Leaderboard. Por favor, verifica tu conexiÃ³n."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg font-bold transition-all",children:"Reintentar"})]})}),e.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 py-2 px-6 flex justify-between items-center shadow-lg z-10 shrink-0",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:P.find(t=>t.key==="bar_logo")?.value||"/logo.png",alt:"Logo",className:"h-14 w-auto object-contain drop-shadow-[0_0_15px_rgba(59,130,246,0.2)]",onError:t=>t.currentTarget.src="https://via.placeholder.com/150x50?text=LOGO"}),e.jsxs("p",{className:"text-gray-500 text-[9px] font-black flex items-center tracking-[0.2em] uppercase opacity-50 mt-1",children:[e.jsx(J,{size:10,className:"mr-1.5 text-green-500 animate-pulse"}),"Live Updates ",a&&" â€¢ Auto-Rotation ON"]})]}),e.jsx("div",{className:"flex items-center space-x-6",children:!a&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-xs font-bold uppercase tracking-wide flex items-center transition-colors shadow-lg shadow-blue-600/20",children:[e.jsx(he,{size:16,className:"mr-2"}),"Registrar Tiempo"]}),e.jsx("div",{className:"w-px h-6 bg-gray-700 mx-2"}),x&&e.jsxs("div",{className:"px-3 py-1 bg-gray-700 rounded-lg border border-gray-600 flex items-center",children:[e.jsx(Q,{size:14,className:"mr-2 text-blue-400"}),e.jsx("span",{className:"font-bold uppercase text-xs",children:x.replace(/_/g," ")})]}),e.jsx("div",{className:"flex bg-gray-700/50 rounded-lg p-1",children:Array.isArray(p)&&p.map(t=>e.jsx("button",{onClick:()=>y(t.id),className:U("px-4 py-1.5 rounded-md text-xs font-bold transition-all",g===t.id?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-white"),children:t.label},t.id))})]})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[!a&&e.jsxs("div",{className:"w-1/4 bg-gray-800/50 p-6 pb-20 border-r border-gray-700 flex flex-col relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-5 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-3xl font-black uppercase italic text-white mb-1 truncate",children:l}),e.jsx("span",{className:"bg-white/10 text-white/60 px-2 py-0.5 rounded text-[10px] font-mono",children:"MAPA DEL CIRCUITO"})]}),e.jsxs("div",{className:"flex-1 flex flex-col space-y-4 min-h-0",children:[e.jsxs("div",{className:"flex-1 bg-gray-900/50 rounded-2xl border border-gray-700 p-4 relative flex items-center justify-center group overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsxs("span",{className:"flex items-center space-x-2 bg-black/60 backdrop-blur px-3 py-1.5 rounded-full text-[9px] font-black text-gray-400 border border-gray-700 uppercase tracking-widest",children:[e.jsx(H,{size:10,className:"text-gray-400"}),e.jsx("span",{children:"LAYOUT"})]})}),e.jsx(je,{track:l})]}),e.jsxs("div",{className:"flex-1 bg-gray-900/50 rounded-2xl border border-gray-700 p-6 flex flex-col items-center justify-center relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-600/5 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"bg-white p-3 rounded-2xl shadow-2xl relative z-10 lg:scale-125 transition-transform group-hover:scale-140",children:e.jsx(se,{value:s("bar_public_url","http://localhost:5173/mobile"),size:160,level:"H",includeMargin:!1})}),e.jsxs("div",{className:"mt-8 text-center relative z-10",children:[e.jsx("p",{className:"text-blue-400 font-black text-sm uppercase tracking-[0.3em] animate-pulse",children:"Ver en mÃ³vil"}),e.jsx("p",{className:"text-blue-300 text-[11px] font-black uppercase mt-1 tracking-[0.15em] opacity-80",children:"Escanea para seguir tiempos"})]})]})]})]}),e.jsx("div",{className:"mt-4 shrink-0",children:a&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-700 text-[8px] font-bold uppercase tracking-widest",children:[e.jsx(me,{size:8,className:"animate-spin opacity-50"}),e.jsx("span",{className:"opacity-40",children:"ActualizaciÃ³n en Vivo"})]})})]}),e.jsx("div",{className:`${a?"w-full":"w-3/4"} flex flex-col bg-gray-900`,children:e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-900 sticky top-0 z-20 shadow-md",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-sm font-bold text-gray-500 uppercase tracking-widest w-20",children:"Rank"}),e.jsx("th",{className:"p-4 text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Piloto"}),e.jsx("th",{className:"p-4 text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Coche"}),e.jsx("th",{className:"p-4 text-sm font-bold text-gray-500 uppercase tracking-widest text-right",children:"Tiempo"}),e.jsx("th",{className:"p-4 text-sm font-bold text-gray-500 uppercase tracking-widest text-right",children:"Gap"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:k?[...Array(10)].map((t,n)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"p-6",children:e.jsx("div",{className:"h-6 w-8 bg-gray-800 rounded"})}),e.jsx("td",{className:"p-6",children:e.jsx("div",{className:"h-6 w-32 bg-gray-800 rounded"})}),e.jsx("td",{className:"p-6",children:e.jsx("div",{className:"h-6 w-24 bg-gray-800 rounded"})}),e.jsx("td",{className:"p-6 text-right",children:e.jsx("div",{className:"h-6 w-20 bg-gray-800 rounded ml-auto"})}),e.jsx("td",{className:"p-6 text-right",children:e.jsx("div",{className:"h-6 w-12 bg-gray-800 rounded ml-auto"})})]},n)):!Array.isArray(i)||i.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"p-12 text-center text-gray-500",children:[e.jsx("p",{className:"text-xl font-bold mb-2",children:"Sin Tiempos Registrados"}),e.jsx("p",{className:"text-sm",children:"SÃ© el primero en marcar una vuelta rÃ¡pida en esta categorÃ­a."})]})}):Array.isArray(i)&&i.map((t,n)=>e.jsxs("tr",{className:U("group transition-colors border-l-4 border-transparent hover:bg-gray-800/50",n===0?"bg-yellow-500/5 border-yellow-500":n===1?"bg-gray-400/5 border-gray-400":n===2?"bg-orange-700/5 border-orange-700":""),children:[e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:U("w-10 h-10 flex items-center justify-center rounded-xl font-black font-mono text-lg transition-transform hover:scale-110",n===0?"bg-gradient-to-br from-yellow-400 to-amber-600 text-black shadow-lg shadow-yellow-500/40 ring-2 ring-yellow-400/50":n===1?"bg-gradient-to-br from-gray-300 to-gray-500 text-black shadow-lg shadow-gray-400/30 ring-2 ring-gray-400/30":n===2?"bg-gradient-to-br from-orange-400 to-orange-700 text-white shadow-lg shadow-orange-500/30 ring-2 ring-orange-400/30":"text-gray-400 bg-gray-800/80 border border-gray-700"),children:t.rank})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsx("img",{src:`https://api.dicebear.com/7.x/bottts-neutral/svg?seed=${encodeURIComponent(t.driver_name)}`,className:"w-10 h-10 rounded-lg bg-gray-800 border border-gray-700 shadow-inner",alt:"Avatar"}),n===0&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-black p-0.5 rounded-full border border-gray-900",children:e.jsx(te,{size:8})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-gray-200 text-lg group-hover:text-white transition-all uppercase italic flex items-center gap-3",children:[t.driver_name,!a&&e.jsx(de,{driverName:t.driver_name,size:"sm"})]}),e.jsx("div",{className:"text-xs text-gray-500 font-mono mt-0.5",children:new Date(t.timestamp).toLocaleDateString()})]})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center text-gray-400 group-hover:text-blue-400 transition-colors",children:[e.jsx(Q,{size:16,className:"mr-2"}),e.jsx("span",{className:"font-medium text-sm",children:t.car_model.replace(/_/g," ")})]})}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsx("div",{className:"font-mono font-bold text-2xl text-white tracking-tight tabular-nums",children:K(t.lap_time)})}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("div",{className:U("font-mono font-bold text-sm tabular-nums px-2 py-1 rounded inline-block",n===0?"text-yellow-500 bg-yellow-500/10":"text-red-400 bg-red-400/10"),children:ve(t.lap_time-i[0].lap_time)}),e.jsx("button",{onClick:A=>{A.stopPropagation(),b(t.lap_id)},className:"p-2 bg-gray-700 hover:bg-blue-600 rounded text-gray-400 hover:text-white transition-colors group/btn",title:"Ver TelemetrÃ­a",children:e.jsx(ue,{size:16})})]})})]},n))})]})})})]}),e.jsx(be,{isOpen:O,onClose:()=>h(!1),preselectedTrack:l}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-gray-900 w-full max-w-5xl rounded-2xl shadow-2xl border border-gray-700 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsxs("h3",{className:"text-xl font-black italic uppercase text-white flex items-center",children:[e.jsx(J,{className:"mr-2 text-yellow-500"}),"AnÃ¡lisis de TelemetrÃ­a"]}),e.jsx("button",{onClick:()=>{b(null),j(null)},className:"p-2 hover:bg-gray-800 rounded-full text-gray-400 hover:text-white transition-colors",children:e.jsx(G,{size:20})})]}),e.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs("div",{className:"flex-1 bg-gray-800 p-3 rounded border border-gray-700",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 block",children:"Vuelta Principal"}),e.jsx("span",{className:"text-lg font-bold text-yellow-500",children:i?.find(t=>t.lap_id===v)?.driver_name})]}),e.jsxs("div",{className:"flex-1 bg-gray-800 p-3 rounded border border-gray-700",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 block",children:"Comparar con..."}),e.jsxs("select",{className:"w-full bg-transparent text-white font-bold outline-none border-none p-0 focus:ring-0 cursor-pointer",value:_||"",onChange:t=>j(t.target.value?Number(t.target.value):null),children:[e.jsx("option",{value:"",children:"-- Seleccionar Rival --"}),Array.isArray(i)&&i.filter(t=>t.lap_id!==v).map(t=>e.jsxs("option",{value:t.lap_id,className:"bg-gray-900",children:[t.rank,". ",t.driver_name," (",K(t.lap_time),")"]},t.lap_id))]})]})]}),e.jsx(ce,{lapId:v,compareLapId:_||void 0})]})]})})]})}export{Ze as default};
