import{c as je,r,f as mt,u as q,j as e,i as ft,a as V,A as G,T as me,k as Le,S as gt}from"./index-MjGtIaAt.js";import{u as Me}from"./useMutation-Ckz2NycH.js";import{a as bt}from"./index-BPWuL58u.js";import{a as Ke,b as Be,g as pt}from"./content-JD-QJUlN.js";import{G as Re}from"./gauge-BmF6m-rA.js";import{A as fe}from"./activity-d8XIJMYL.js";import{D as yt}from"./disc-DzTd3-HA.js";import{C as Ce}from"./clock-DpL4IKBu.js";import{F as Oe}from"./flag-Cs2ejYuM.js";import{W as vt,C as jt}from"./wifi-off-BRKQCIuI.js";import{R as He,X as Je}from"./CartesianChart-byA6CRUy.js";import{L as We,a as De}from"./LineChart-BAS0o-Op.js";import{C as Ye}from"./getRadiusAndStrokeWidthFromDot-hhzSCn0X.js";import{Y as Ze}from"./YAxis-hjvaWDO6.js";import{T as Qe}from"./Tooltip-BKNbpHsn.js";import{S as Xe}from"./shield-check-FWb2ExcJ.js";import{C as et}from"./car-Bto1fEN0.js";import{P as wt}from"./play-DPq4Txf5.js";import{M as Nt}from"./medal-9zSXB385.js";import{Z as tt}from"./zap-BctN5ITw.js";import{T as kt}from"./trending-up-BHF8h5rZ.js";import"./clsx-B-dksMZM.js";const Et=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],St=je("cloud-rain",Et);const It=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],Ct=je("footprints",It);const At=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$e=je("log-out",At);const Tt=[["path",{d:"M17 12v4a1 1 0 0 1-1 1h-4",key:"uk4fdo"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M17 8V7",key:"q2g9wo"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M7 17h.01",key:"19xn7k"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["rect",{x:"7",y:"7",width:"5",height:"5",rx:"1",key:"m9kyts"}]],_t=je("scan-qr-code",Tt);const Lt=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],Mt=je("sunset",Lt);var Rt=Object.create,rt=Object.defineProperty,Ot=Object.getOwnPropertyDescriptor,Dt=Object.getOwnPropertyNames,$t=Object.getPrototypeOf,Pt=Object.prototype.hasOwnProperty,zt=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports),qt=(t,o,i,m)=>{if(o&&typeof o=="object"||typeof o=="function")for(let f of Dt(o))!Pt.call(t,f)&&f!==i&&rt(t,f,{get:()=>o[f],enumerable:!(m=Ot(o,f))||m.enumerable});return t},Ut=(t,o,i)=>(i=t!=null?Rt($t(t)):{},qt(!t||!t.__esModule?rt(i,"default",{value:t,enumerable:!0}):i,t)),Ft=zt((t,o)=>{(function(i,m){typeof t=="object"&&typeof o<"u"?m(t):typeof define=="function"&&define.amd?define(["exports"],m):(i=typeof globalThis<"u"?globalThis:i||self,m(i.fastUniqueNumbers={}))})(t,function(i){var m=function(_){return function(M){var y=_(M);return M.add(y),y}},f=function(_){return function(M,y){return _.set(M,y),y}},h=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,T=536870912,L=T*2,Z=function(_,M){return function(y){var D=M.get(y),b=D===void 0?y.size:D<L?D+1:0;if(!y.has(b))return _(y,b);if(y.size<T){for(;y.has(b);)b=Math.floor(Math.random()*L);return _(y,b)}if(y.size>h)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;y.has(b);)b=Math.floor(Math.random()*h);return _(y,b)}},K=new WeakMap,se=f(K),B=Z(se,K),Q=m(B);i.addUniqueNumber=Q,i.generateUniqueNumber=B})});Ut(Ft());var ie=(typeof window>"u"?"undefined":typeof window)=="object",Y={setTimeout:ie?setTimeout.bind(window):setTimeout,clearTimeout:ie?clearTimeout.bind(window):clearTimeout,setInterval:ie?setInterval.bind(window):setInterval,clearInterval:ie?clearInterval.bind(window):clearInterval};function Vt(t){Y.setTimeout=t.setTimeout,Y.clearTimeout=t.clearTimeout,Y.setInterval=t.setInterval,Y.clearInterval=t.clearInterval}var ge={},Gt=class{name;closed=!1;mc=new MessageChannel;constructor(t){this.name=t,ge[t]=ge[t]||[],ge[t].push(this),this.mc.port1.start(),this.mc.port2.start(),this.onStorage=this.onStorage.bind(this),window.addEventListener("storage",this.onStorage)}onStorage(t){if(t.storageArea!==window.localStorage||t.key.substring(0,this.name.length)!==this.name||t.newValue===null)return;let o=JSON.parse(t.newValue);this.mc.port2.postMessage(o)}postMessage(t){if(this.closed)throw new Error("InvalidStateError");let o=JSON.stringify(t),i=`${this.name}:${String(Date.now())}${String(Math.random())}`;window.localStorage.setItem(i,o),Y.setTimeout(()=>{window.localStorage.removeItem(i)},500),ge[this.name].forEach(m=>{m!==this&&m.mc.port2.postMessage(JSON.parse(o))})}close(){if(this.closed)return;this.closed=!0,this.mc.port1.close(),this.mc.port2.close(),window.removeEventListener("storage",this.onStorage);let t=ge[this.name].indexOf(this);ge[this.name].splice(t,1)}get onmessage(){return this.mc.port1.onmessage}set onmessage(t){this.mc.port1.onmessage=t}get onmessageerror(){return this.mc.port1.onmessageerror}set onmessageerror(t){this.mc.port1.onmessageerror=t}addEventListener(t,o){return this.mc.port1.addEventListener(t,o)}removeEventListener(t,o){return this.mc.port1.removeEventListener(t,o)}dispatchEvent(t){return this.mc.port1.dispatchEvent(t)}},Kt=typeof window>"u"?void 0:typeof window.BroadcastChannel=="function"?window.BroadcastChannel:Gt;function Bt(t=0){return new Promise(o=>Y.setTimeout(o,t))}function st(){return Math.random().toString(36).substring(2)}var Ht=class{options;channel;token=st();isLeader=!1;isDead=!1;isApplying=!1;reApply=!1;intervals=[];listeners=[];deferred;constructor(t,o){this.channel=t,this.options=o,this.apply=this.apply.bind(this),this.awaitLeadership=this.awaitLeadership.bind(this),this.sendAction=this.sendAction.bind(this)}async apply(){if(this.isLeader||this.isDead)return!1;if(this.isApplying)return this.reApply=!0,!1;this.isApplying=!0;let t=!1,o=i=>{let{token:m,action:f}=i.data;m!==this.token&&(f===0&&m>this.token&&(t=!0),f===1&&(t=!0))};this.channel.addEventListener("message",o);try{return this.sendAction(0),await Bt(this.options.responseTime),this.channel.removeEventListener("message",o),this.isApplying=!1,t?this.reApply?this.apply():!1:(this.assumeLead(),!0)}catch{return!1}}awaitLeadership(){if(this.isLeader)return Promise.resolve();let t=!1,o=null;return new Promise(i=>{let m=()=>{if(t)return;t=!0;try{Y.clearInterval(o)}catch{}let h=this.intervals.indexOf(o);h>=0&&this.intervals.splice(h,1),this.channel.removeEventListener("message",f),i()};o=Y.setInterval(()=>{this.apply().then(()=>{this.isLeader&&m()})},this.options.fallbackInterval),this.intervals.push(o);let f=h=>{let{action:T}=h.data;T===2&&this.apply().then(()=>{this.isLeader&&m()})};this.channel.addEventListener("message",f)})}sendAction(t){this.channel.postMessage({action:t,token:this.token})}assumeLead(){this.isLeader=!0;let t=o=>{let{action:i}=o.data;i===0&&this.sendAction(1)};return this.channel.addEventListener("message",t),this.listeners.push(t),this.sendAction(1)}waitForLeadership(){return this.deferred?this.deferred:(this.deferred=this.awaitLeadership(),this.deferred)}close(){if(!this.isDead){this.isDead=!0,this.isLeader=!1,this.sendAction(2);try{this.listeners.forEach(t=>this.channel.removeEventListener("message",t)),this.intervals.forEach(t=>Y.clearInterval(t))}catch{}}}},Jt=class{channel;options;elector;token=st();registry=new Map;allIdle=!1;isLastActive=!1;constructor(t){let{channelName:o}=t;if(this.options=t,this.channel=new Kt(o),this.registry.set(this.token,1),t.leaderElection){let i={fallbackInterval:2e3,responseTime:100};this.elector=new Ht(this.channel,i),this.elector.waitForLeadership()}this.channel.addEventListener("message",i=>{let{action:m,token:f,data:h}=i.data;switch(m){case 3:this.registry.set(f,2);break;case 4:this.registry.delete(f);break;case 5:this.idle(f);break;case 6:this.active(f);break;case 7:this.prompt(f);break;case 8:this.start(f);break;case 9:this.reset(f);break;case 10:this.activate(f);break;case 11:this.pause(f);break;case 12:this.resume(f);break;case 13:this.options.onMessage(h);break}}),this.send(3)}get isLeader(){if(!this.elector)throw new Error('❌ Leader election is not enabled. To Enable it set the "leaderElection" property to true.');return this.elector.isLeader}prompt(t=this.token){this.registry.set(t,0);let o=[...this.registry.values()].every(i=>i===0);t===this.token&&this.send(7),o&&this.options.onPrompt()}idle(t=this.token){this.registry.set(t,2);let o=[...this.registry.values()].every(i=>i===2);t===this.token&&this.send(5),!this.allIdle&&o&&(this.allIdle=!0,this.options.onIdle())}active(t=this.token){this.allIdle=!1,this.registry.set(t,1);let o=[...this.registry.values()].some(i=>i===1);t===this.token&&this.send(6),o&&this.options.onActive(),this.isLastActive=t===this.token}start(t=this.token){this.allIdle=!1,this.registry.set(t,1),t===this.token?this.send(8):this.options.start(!0),this.isLastActive=t===this.token}reset(t=this.token){this.allIdle=!1,this.registry.set(t,1),t===this.token?this.send(9):this.options.reset(!0),this.isLastActive=t===this.token}activate(t=this.token){this.allIdle=!1,this.registry.set(t,1),t===this.token?this.send(10):this.options.activate(!0),this.isLastActive=t===this.token}pause(t=this.token){t===this.token?this.send(11):this.options.pause(!0)}resume(t=this.token){t===this.token?this.send(12):this.options.resume(!0)}message(t){try{this.channel.postMessage({action:13,token:this.token,data:t})}catch{}}send(t){try{this.channel.postMessage({action:t,token:this.token})}catch{}}close(){this.options.leaderElection&&this.elector.close(),this.send(4),this.channel.close()}},Wt=ie?document:null,Yt=["mousemove","keydown","wheel","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove","visibilitychange","focus"];function Zt(t,o){let i;function m(...f){i&&clearTimeout(i),i=setTimeout(()=>{t(...f),i=null},o)}return m.cancel=function(){clearTimeout(i)},m}function Pe(t,o){let i=0;return function(...m){let f=new Date().getTime();if(!(f-i<o))return i=f,t(...m)}}var C=()=>Date.now(),be=2147483647;function Qt({timeout:t=1e3*60*20,promptTimeout:o=0,promptBeforeIdle:i=0,element:m=Wt,events:f=Yt,timers:h=void 0,immediateEvents:T=[],onPresenceChange:L=()=>{},onPrompt:Z=()=>{},onIdle:K=()=>{},onActive:se=()=>{},onAction:B=()=>{},onMessage:Q=()=>{},debounce:_=0,throttle:M=0,eventsThrottle:y=200,startOnMount:D=!0,startManually:b=!1,stopOnIdle:pe=!1,crossTab:H=!1,name:ae="idle-timer",syncTimers:le=0,leaderElection:ye=!1,disabled:U=!1}={}){let we=r.useRef(C()),$=r.useRef(C()),k=r.useRef(null),R=r.useRef(null),X=r.useRef(0),E=r.useRef(0),F=r.useRef(0),A=r.useRef(0),N=r.useRef(!1),S=r.useRef(!1),ee=r.useRef(!1),te=r.useRef(!0),oe=r.useRef(!1),J=r.useRef(null),d=r.useRef(null),P=r.useRef(t),ne=r.useRef(0);r.useEffect(()=>{if(o&&console.warn("⚠️ IdleTimer -- The `promptTimeout` property has been deprecated in favor of `promptBeforeIdle`. It will be removed in the next major release."),i&&o)throw new Error("❌ Both promptTimeout and promptBeforeIdle can not be set. The promptTimeout property will be deprecated in a future version.");if(t>=be)throw new Error(`❌ The value for the timeout property must fit in a 32 bit signed integer, ${be}.`);if(o>=be)throw new Error(`❌ The value for the promptTimeout property must fit in a 32 bit signed integer, ${be}.`);if(i>=be)throw new Error(`❌ The value for the promptBeforeIdle property must fit in a 32 bit signed integer, ${be}.`);if(i>=t)throw new Error(`❌ The value for the promptBeforeIdle property must be less than the timeout property, ${t}.`);if(i?(P.current=t-i,ne.current=i):(P.current=t,ne.current=o),!te.current){if(b||U)return;N.current&&(u.current(null,z),d.current&&d.current.active()),xe()}},[t,o,i,b,U]);let Ne=r.useRef(pe);r.useEffect(()=>{Ne.current=pe},[pe]);let ke=r.useRef(T),de=r.useRef(m),ve=r.useRef([...new Set([...f,...T]).values()]),s=r.useRef(U);r.useEffect(()=>{s.current=U,!te.current&&(U?Se():b||xe())},[U]);let g=r.useRef(L);r.useEffect(()=>{g.current=L},[L]);let x=r.useRef(Z);r.useEffect(()=>{x.current=Z},[Z]);let p=r.useRef(K);r.useEffect(()=>{p.current=K},[K]);let u=r.useRef(se);r.useEffect(()=>{u.current=se},[se]);let v=r.useRef(B);r.useEffect(()=>{v.current=B},[B]);let w=r.useRef(Q);r.useEffect(()=>{w.current=Q},[Q]);let n=r.useMemo(()=>{let a=(O,Ie)=>v.current(O,Ie);return _>0?Zt(a,_):M>0?Pe(a,M):a},[M,_]),c=r.useRef();r.useEffect(()=>{H&&le&&(c.current=Pe(()=>{d.current.active()},le))},[H,le]);let l=()=>{J.current!==null&&(Y.clearTimeout(J.current),J.current=null)},I=(a,O=!0)=>{l(),J.current=Y.setTimeout(he,a||P.current),O&&(R.current=C())},j=a=>{!S.current&&!N.current&&(x.current(a,z),g.current({type:"active",prompted:!0},z)),A.current=0,F.current=C(),S.current=!0,I(ne.current,!1)},re=()=>{l(),N.current||(p.current(null,z),g.current({type:"idle"},z)),N.current=!0,k.current=C(),Ne.current?ue():S.current&&(F.current=0,S.current=!1)},W=a=>{l(),(N.current||S.current)&&(u.current(a,z),g.current({type:"active",prompted:!1},z)),S.current=!1,F.current=0,N.current=!1,X.current+=C()-k.current,E.current+=C()-k.current,ce(),I()},he=a=>{if(!N.current){n.cancel&&n.cancel();let O=C()-R.current;if(!(P.current+ne.current<O)&&ne.current>0&&!S.current){d.current?d.current.prompt():j(a);return}d.current?d.current.idle():re();return}d.current?d.current.active():W(a)},Ae=a=>{if(!D&&!R.current&&(R.current=C(),u.current(null,z)),n(a,z),S.current)return;if(l(),!N.current&&ke.current.includes(a.type)){he(a);return}let O=C()-R.current;if(N.current&&!pe||!N.current&&O>=P.current){he(a);return}ee.current=!1,A.current=0,F.current=0,I(),H&&le&&c.current()},Ee=r.useRef(Ae);r.useEffect(()=>{let a=oe.current;a&&ue(),y>0?Ee.current=Pe(Ae,y):Ee.current=Ae,a&&ce()},[y,M,_,v,H,le]);let ce=()=>{ie&&de.current&&(oe.current||(ve.current.forEach(a=>{de.current.addEventListener(a,Ee.current,{capture:!0,passive:!0})}),oe.current=!0))},ue=(a=!1)=>{ie&&de.current&&(oe.current||a)&&(ve.current.forEach(O=>{de.current.removeEventListener(O,Ee.current,{capture:!0})}),oe.current=!1)},xe=r.useCallback(a=>s.current?!1:(l(),ce(),N.current=!1,S.current=!1,ee.current=!1,A.current=0,F.current=0,d.current&&!a&&d.current.start(),I(),!0),[J,N,s,P,d]),Te=r.useCallback(a=>s.current?!1:(l(),ce(),$.current=C(),X.current+=C()-k.current,E.current+=C()-k.current,X.current=0,N.current=!1,S.current=!1,ee.current=!1,A.current=0,F.current=0,d.current&&!a&&d.current.reset(),b||I(),!0),[J,N,P,b,s,d]),ze=r.useCallback(a=>s.current?!1:(l(),ce(),(N.current||S.current)&&W(),N.current=!1,S.current=!1,ee.current=!1,A.current=0,F.current=0,$.current=C(),d.current&&!a&&d.current.activate(),I(),!0),[J,N,S,s,P,d]),Se=r.useCallback((a=!1)=>s.current||ee.current?!1:(A.current=qe(),ee.current=!0,ue(),l(),d.current&&!a&&d.current.pause(),!0),[J,s,d]),_e=r.useCallback((a=!1)=>s.current||!ee.current?!1:(ee.current=!1,S.current||ce(),N.current||I(A.current),F.current&&(F.current=C()),d.current&&!a&&d.current.resume(),!0),[J,P,s,A,d]),at=r.useCallback((a,O)=>(d.current?(O&&w.current(a,z),d.current.message(a)):O&&w.current(a,z),!0),[Q]),lt=r.useCallback(()=>N.current,[N]),nt=r.useCallback(()=>S.current,[S]),it=r.useCallback(()=>d.current?d.current.isLeader:null,[d]),ot=r.useCallback(()=>d.current?d.current.isLastActive:null,[d]),ct=r.useCallback(()=>d.current?d.current.token:null,[d]),qe=r.useCallback(()=>{if(ee.current)return A.current;let a=A.current?A.current:ne.current+P.current,O=R.current?C()-R.current:0,Ie=Math.floor(a-O);return Ie<0?0:Math.abs(Ie)},[P,ne,S,A,R]),Ue=r.useCallback(()=>Math.round(C()-$.current),[$]),Fe=r.useCallback(()=>Math.round(C()-we.current),[we]),dt=r.useCallback(()=>k.current?new Date(k.current):null,[k]),ut=r.useCallback(()=>R.current?new Date(R.current):null,[R]),Ve=r.useCallback(()=>N.current?Math.round(C()-k.current+X.current):Math.round(X.current),[k,X]),Ge=r.useCallback(()=>N.current?Math.round(C()-k.current+E.current):Math.round(E.current),[k,E]),xt=r.useCallback(()=>{let a=Math.round(Ue()-Ve());return a>=0?a:0},[k,X]),ht=r.useCallback(()=>{let a=Math.round(Fe()-Ge());return a>=0?a:0},[k,X]);r.useEffect(()=>{if(_>0&&M>0)throw new Error("❌ onAction can either be throttled or debounced, not both.");h&&Vt(h);let a=()=>{d.current&&d.current.close(),n.cancel&&n.cancel(),l(),ue(!0)};return ie&&window.addEventListener("beforeunload",a),()=>{ie&&window.removeEventListener("beforeunload",a),d.current&&d.current.close(),n.cancel&&n.cancel(),l(),ue(!0)}},[]),r.useEffect(()=>{d.current&&d.current.close(),H?d.current=new Jt({channelName:ae,leaderElection:ye,onPrompt:()=>{j()},onIdle:()=>{re()},onActive:()=>{W()},onMessage:a=>{w.current(a,z)},start:xe,reset:Te,activate:ze,pause:Se,resume:_e}):d.current=null},[H,ae,ye,x,p,u,w,xe,Te,Se,_e]),r.useEffect(()=>{te.current||(l(),ue(!0)),!(b||U)&&(D?xe():ce())},[b,D,U,te]),r.useEffect(()=>{if(!te.current){let a=[...new Set([...f,...T]).values()];if(ue(),ve.current=a,de.current=m,ke.current=T,b||U)return;D?xe():ce()}},[m,JSON.stringify(f),JSON.stringify(T),te,U,b,D]),r.useEffect(()=>{te.current&&(te.current=!1)},[te]);let z={message:at,start:xe,reset:Te,activate:ze,pause:Se,resume:_e,isIdle:lt,isPrompted:nt,isLeader:it,isLastActiveTab:ot,getTabId:ct,getRemainingTime:qe,getElapsedTime:Ue,getTotalElapsedTime:Fe,getLastIdleTime:dt,getLastActiveTime:ut,getIdleTime:Ve,getTotalIdleTime:Ge,getActiveTime:xt,getTotalActiveTime:ht,setOnPresenceChange:a=>{L=a,g.current=a},setOnPrompt:a=>{Z=a,x.current=a},setOnIdle:a=>{K=a,p.current=a},setOnActive:a=>{se=a,u.current=a},setOnAction:a=>{B=a,v.current=a},setOnMessage:a=>{Q=a,w.current=a}};return z}var Xt=r.createContext(null);Xt.Consumer;function wr(){const[t]=mt(),[o,i]=r.useState(1),[m,f]=r.useState(null),[h,T]=r.useState(null),[L,Z]=r.useState("amateur"),[K,se]=r.useState("automatic"),[B,Q]=r.useState("noon"),[_,M]=r.useState("sun"),[y,D]=r.useState(15),[b,pe]=r.useState(null),[H,ae]=r.useState(!1),[le,ye]=r.useState(y*60),{data:U=[]}=q({queryKey:["cars"],queryFn:()=>Ke()}),{data:we=[]}=q({queryKey:["tracks"],queryFn:()=>Be()}),{data:$=[]}=q({queryKey:["available-scenarios"],queryFn:async()=>(await pt()).filter(g=>g.is_active),refetchInterval:1e3}),k=U.find(s=>s.id===h?.car),R=we.find(s=>s.id===h?.track),{data:X=[]}=q({queryKey:["leaderboard",h?.track,h?.car],queryFn:async()=>{if(!h?.track||!h?.car)return[];try{return(await V.get(`${G}/leaderboard/top`,{params:{track:h.track,car:h.car,limit:5}})).data}catch(s){return console.error("Failed to fetch leaderboard",s),[{rank:1,driver_name:"Stig",time:"1:42.550"},{rank:2,driver_name:"Akira",time:"1:43.100"},{rank:3,driver_name:"Takumi",time:"1:43.800"}]}},enabled:!!h?.track&&!!h?.car}),[E,F]=r.useState(1),{data:A}=q({queryKey:["hardware-status",E],queryFn:async()=>{try{const s=await V.get(`${G}/hardware/status/${E}`);if(s.data)return s.data;throw new Error("Empty data")}catch(s){return console.error("Hardware status fetch failed",s),null}},refetchInterval:2e3,retry:!1});r.useEffect(()=>{const s=t.get("station");if(s){const x=parseInt(s,10);if(!isNaN(x)){F(x),localStorage.setItem("kiosk_station_id",String(x));return}}const g=localStorage.getItem("kiosk_station_id");g&&F(parseInt(g,10))},[t]);const[N,S]=r.useState(!1);Qt({onIdle:()=>{S(!0)},onActive:()=>{S(!1)},timeout:300*1e3,throttle:500});const oe=()=>{const{data:s=[]}=q({queryKey:["lobbies"],queryFn:()=>V.get(`${G}/lobby/list?status=active`).then(n=>n.data),refetchInterval:5e3}),g=()=>{if($.length>0){const n=$[Math.floor(Math.random()*$.length)],c=n.allowed_cars?.[Math.floor(Math.random()*n.allowed_cars.length)]||"ks_mercedes_amg_gt3",l=n.allowed_tracks?.[Math.floor(Math.random()*n.allowed_tracks.length)]||"spa";T({type:"scenario",scenarioId:n.id,track:l,car:c,time:10,isLobby:!1}),D(10),i(2)}else alert("No hay escenarios disponibles para aleatorizar.")},p=(()=>{if($.length===0)return null;const n=new Date,c=n.getFullYear()*1e3+(n.getMonth()+1)*31+n.getDate(),l=$[c%$.length],I=c%(l.allowed_cars?.length||1),j=c%(l.allowed_tracks?.length||1);return{...l,selectedCar:l.allowed_cars?.[I]||"ks_mercedes_amg_gt3",selectedTrack:l.allowed_tracks?.[j]||"spa"}})(),[u,v]=r.useState(null),w=(n,c)=>{const l=n.allowed_cars?.[0]||"ks_mercedes_amg_gt3",I=n.allowed_tracks?.[0]||"spa";T({type:"scenario",scenarioId:n.id,track:I,car:l,time:c,isLobby:!1}),D(c),i(2)};return e.jsxs("div",{className:"h-full flex flex-col animate-in zoom-in duration-300",children:[e.jsx("h2",{className:"text-4xl font-black text-white italic tracking-tighter mb-8 text-center drop-shadow-lg",children:"ELIGE TU COMPETICIÓN"}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 space-y-12",children:[s.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black text-blue-400 mb-6 flex items-center gap-3 border-b border-blue-900/50 pb-2",children:[e.jsx(fe,{className:"animate-pulse"})," SALAS MULTIJUGADOR EN VIVO"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(n=>e.jsxs("div",{onClick:()=>{T({type:"lobby",lobbyId:n.id,track:n.track,car:n.car,isLobby:!0,isHost:!1}),i(2)},className:"bg-blue-900/20 border-2 border-blue-500/50 hover:bg-blue-900/40 hover:border-blue-400 p-6 rounded-3xl cursor-pointer transition-all group hover:scale-[1.02] shadow-xl shadow-blue-900/20",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-blue-600 text-white text-xs font-black px-3 py-1 rounded-full uppercase tracking-wider",children:"ONLINE"}),n.status==="running"?e.jsxs("span",{className:"flex items-center gap-2 text-red-400 font-bold text-xs uppercase animate-pulse",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," EN CARRERA"]}):e.jsxs("span",{className:"flex items-center gap-2 text-green-400 font-bold text-xs uppercase",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," ESPERANDO"]})]}),e.jsx("h4",{className:"text-2xl font-black text-white group-hover:text-blue-200 truncate",children:n.name}),e.jsxs("p",{className:"text-blue-200/60 font-mono text-sm mt-1",children:[n.track," | ",n.car]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex -space-x-3",children:[Array.from({length:Math.min(3,n.player_count)}).map((c,l)=>e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-700 border-2 border-gray-900 flex items-center justify-center text-xs text-white font-bold",children:["P",l+1]},l)),n.player_count>3&&e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-800 border-2 border-gray-900 flex items-center justify-center text-xs text-white font-bold",children:["+",n.player_count-3]})]}),e.jsxs("span",{className:"text-white font-black text-lg",children:[n.player_count," / ",n.max_players]})]})]},n.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black text-yellow-500 mb-6 flex items-center gap-3 border-b border-yellow-900/30 pb-2",children:[e.jsx(me,{className:"text-yellow-500"})," EVENTOS ESPECIALES"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[p&&e.jsxs("div",{onClick:()=>{T({type:"scenario",scenarioId:p.id,track:p.selectedTrack,car:p.selectedCar,time:10,isLobby:!1}),D(10),i(2)},className:"group relative bg-gradient-to-br from-yellow-600 to-orange-700 rounded-3xl p-6 cursor-pointer border-4 border-yellow-400/50 hover:border-white shadow-2xl hover:scale-[1.03] transition-all overflow-hidden flex flex-col justify-between h-80",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-yellow-400 text-black font-black text-xs px-3 py-1 rounded-bl-xl z-20",children:"RETO DEL DÍA"}),e.jsx("div",{className:"absolute inset-0 bg-black/30 group-hover:bg-black/10 transition-all z-0"}),e.jsxs("div",{className:"relative z-10 text-center mt-4 flex-1 flex flex-col items-center justify-center",children:[e.jsx(me,{size:64,className:"mx-auto text-yellow-200 mb-4 drop-shadow-lg animate-bounce"}),e.jsxs("h3",{className:"text-3xl font-black text-white leading-none uppercase",children:["DAILY",e.jsx("br",{}),"CHALLENGE"]}),e.jsxs("p",{className:"mt-2 text-yellow-200 font-bold uppercase",children:[p.selectedTrack," • ",p.selectedCar]}),e.jsx("p",{className:"text-xs text-white/70 mt-1",children:p.name})]}),e.jsx("button",{className:"relative z-10 w-full bg-white text-black font-black py-3 rounded-xl mt-4 hover:bg-gray-200 transition-colors uppercase text-sm tracking-wider",children:"ACEPTAR RETO"})]}),e.jsxs("div",{onClick:g,className:"group relative bg-gradient-to-br from-purple-600 to-pink-600 rounded-3xl p-6 cursor-pointer border-4 border-white/10 hover:border-white shadow-2xl hover:scale-[1.03] transition-all overflow-hidden flex flex-col justify-between h-80",children:[e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center opacity-20 z-0",children:e.jsx("div",{className:"text-9xl font-black text-white",children:"?"})}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-center",children:[e.jsx(Re,{size:80,className:"text-white mb-6 drop-shadow-lg group-hover:rotate-180 transition-transform duration-700"}),e.jsx("h3",{className:"text-4xl font-black text-white leading-tight",children:"¡SORPRÉNDEME!"}),e.jsx("p",{className:"text-pink-200 mt-2 font-medium",children:"Combinación Aleatoria"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black text-gray-400 mb-6 flex items-center gap-3 border-b border-gray-800 pb-2",children:[e.jsx(Oe,{})," PRÁCTICA LIBRE"]}),$.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-12",children:[e.jsx(vt,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No hay escenarios disponibles."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:$.map(n=>e.jsxs("div",{onClick:()=>v(u===n.id?null:n.id),className:`relative bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-8 border-4 cursor-pointer transition-all shadow-2xl group overflow-hidden ${u===n.id?"border-blue-500 scale-105 z-10":"border-gray-700 hover:border-gray-500 hover:scale-[1.02]"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-gray-700 p-3 rounded-2xl",children:e.jsx(Oe,{size:32,className:u===n.id?"text-blue-400":"text-gray-400"})}),n.allowed_cars.length>0&&e.jsx("span",{className:"bg-gray-700 text-white text-xs font-bold px-2 py-1 rounded",children:"RESTRICTED"})]}),e.jsx("h3",{className:"text-3xl font-black text-white mb-2 uppercase leading-none",children:n.name}),e.jsx("p",{className:"text-gray-400 mb-6 min-h-[3rem] text-sm line-clamp-2",children:n.description||"Competición abierta"}),u===n.id?e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsx("p",{className:"text-xs font-bold text-blue-400 uppercase tracking-widest mb-2",children:"ELIGE DURACIÓN:"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(n.allowed_durations?.length?n.allowed_durations:[10,15,20]).map(c=>e.jsxs("button",{onClick:l=>{l.stopPropagation(),w(n,c)},className:"bg-blue-600 hover:bg-blue-500 text-white font-black py-3 rounded-xl border border-blue-400/30 flex items-center justify-center gap-2 transition-transform active:scale-95",children:[e.jsx(Ce,{size:16})," ",c,"m"]},c))})]}):e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-gray-500 font-bold group-hover:text-white transition-colors",children:[e.jsx("span",{children:"SELECCIONAR"})," ",e.jsx(Le,{})]})]},n.id))})]})]})]})},J=()=>{const[s,g]=r.useState(""),[x,p]=r.useState(""),{data:u}=q({queryKey:["kiosk-leaderboard"],queryFn:async()=>(await V.get(`${G}/telemetry/leaderboard`,{params:{limit:5,period:"all"}})).data,retry:!1,staleTime:6e4}),v=c=>{const l=Math.floor(c/6e4),I=(c%6e4/1e3).toFixed(3);return`${l}:${I.padStart(6,"0")}`},w=(u||[]).map((c,l)=>({pos:l+1,name:c.driver_name||"Unknown",time:v(c.best_time||0),car:c.car_model||"Unknown Car"})),n=async c=>{c.preventDefault();try{f({id:1,name:s||"Guest Driver"}),h?.car&&h?.track?i(4):i(3)}catch{alert("Error registering driver")}};return e.jsx("div",{className:"flex items-center justify-center h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 w-full max-w-5xl",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("h1",{className:"text-5xl font-black text-white italic mb-2 tracking-tighter",children:"BIENVENIDO PILOTO"}),e.jsx("p",{className:"text-xl text-gray-400 mb-8",children:"Identifícate para guardar tus tiempos"}),e.jsxs("form",{onSubmit:n,className:"w-full max-w-lg space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-400 font-bold ml-1",children:"NOMBRE DE PILOTO"}),e.jsx("input",{type:"text",className:"w-full bg-gray-800 border-2 border-gray-700 focus:border-blue-500 rounded-2xl px-6 py-4 text-2xl text-white font-bold outline-none transition-all focus:scale-[1.02] placeholder:text-gray-600",placeholder:"Ej. Max Verstappen",value:s,onChange:c=>g(c.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-400 font-bold ml-1",children:"EMAIL (Opcional)"}),e.jsx("input",{type:"email",className:"w-full bg-gray-800 border-2 border-gray-700 focus:border-blue-500 rounded-2xl px-6 py-4 text-2xl text-white font-bold outline-none transition-all focus:scale-[1.02] placeholder:text-gray-600",placeholder:"max@redbull.com",value:x,onChange:c=>p(c.target.value)})]}),e.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-black text-2xl py-6 rounded-2xl shadow-xl shadow-blue-600/20 active:scale-95 hover:scale-[1.02] transition-all flex items-center justify-center gap-3",children:["COMENZAR ",e.jsx(Le,{size:32})]})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-3xl border border-gray-800 p-6 backdrop-blur-sm animate-in slide-in-from-right-8 duration-700",children:[e.jsxs("h3",{className:"text-2xl font-black text-white mb-4 flex items-center gap-3",children:[e.jsx(me,{className:"text-yellow-400"})," MEJORES TIEMPOS"]}),e.jsx("div",{className:"space-y-3",children:w.map((c,l)=>e.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-xl transition-all ${l===0?"bg-yellow-500/10 border border-yellow-500/30":"bg-gray-800/50"}`,style:{animationDelay:`${l*100}ms`},children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-black ${l===0?"bg-yellow-500 text-black":l===1?"bg-gray-400 text-black":l===2?"bg-orange-700 text-white":"bg-gray-700 text-gray-300"}`,children:c.pos}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-white",children:c.name}),e.jsx("p",{className:"text-xs text-gray-500",children:c.car})]}),e.jsx("div",{className:`font-mono font-bold text-lg ${l===0?"text-yellow-400":"text-green-400"}`,children:c.time}),l===0&&e.jsx(Nt,{className:"text-yellow-400",size:20})]},c.pos))}),e.jsx("p",{className:"text-center text-gray-600 text-sm mt-4",children:"¿Podrás batir el récord?"})]})]})})},d=()=>{const{data:s=[]}=q({queryKey:["cars",E],queryFn:()=>Ke(E)}),{data:g=[]}=q({queryKey:["tracks",E],queryFn:()=>Be(E)}),x=s.filter(l=>!b||!b.allowed_cars||b.allowed_cars.length===0?!0:b.allowed_cars.includes(l.id)),p=g.filter(l=>!b||!b.allowed_tracks||b.allowed_tracks.length===0?!0:b.allowed_tracks.includes(l.id)),[u,v]=r.useState(null),[w,n]=r.useState(null),c=()=>{u&&w&&(T({car:u,track:w}),i(4))};return e.jsxs("div",{className:"h-full flex flex-col animate-in slide-in-from-right duration-300",children:[e.jsxs("h2",{className:"text-3xl font-black text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"bg-blue-600 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl",children:"1"}),"ELIGE TU MÁQUINA Y PISTA"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 flex-1 overflow-hidden min-h-0",children:[e.jsxs("div",{className:"flex flex-col min-h-0",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-400 mb-4 flex items-center gap-2",children:[e.jsx(et,{})," COCHES DISPONIBLES (",x?.length,")"]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3 custom-scrollbar",children:x?.map(l=>e.jsxs("div",{onClick:()=>v(l.id),className:`p-4 rounded-xl border-2 cursor-pointer transition-all hover:scale-[1.02] flex items-center gap-4 ${u===l.id?"border-blue-500 bg-blue-500/20 scale-[1.02]":"border-gray-700 bg-gray-800/50 hover:bg-gray-800"}`,children:[l.image_url&&e.jsx("img",{src:l.image_url,alt:l.name,className:"w-20 h-12 object-cover rounded bg-black/50",onError:I=>{I.target.style.display="none"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-white",children:l.name}),e.jsx("p",{className:"text-xs text-gray-500",children:l.brand||"Generic"})]}),u===l.id&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})]},l.id))})]}),e.jsxs("div",{className:"flex flex-col min-h-0",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-400 mb-4 flex items-center gap-2",children:[e.jsx(Oe,{})," CIRCUITOS (",p?.length,")"]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3 custom-scrollbar",children:p?.map(l=>e.jsxs("div",{onClick:()=>n(l.id),className:`p-4 rounded-xl border-2 cursor-pointer transition-all hover:scale-[1.02] flex items-center gap-4 ${w===l.id?"border-green-500 bg-green-500/20 scale-[1.02]":"border-gray-700 bg-gray-800/50 hover:bg-gray-800"}`,children:[l.image_url&&e.jsx("img",{src:l.image_url,alt:l.name,className:"w-20 h-12 object-cover rounded bg-black/50",onError:I=>{I.target.style.display="none"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-white",children:l.name}),e.jsx("p",{className:"text-xs text-gray-500",children:l.layout||"Main"})]}),w===l.id&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]},l.id))})]})]}),e.jsx("div",{className:"py-6 flex justify-end",children:e.jsxs("button",{disabled:!u||!w,onClick:c,className:"bg-white text-black hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed font-black text-xl px-12 py-4 rounded-xl shadow-lg flex items-center gap-3 transition-all",children:["SIGUIENTE ",e.jsx(Le,{})]})})]})},P=()=>{const s=Me({mutationFn:async()=>{await V.post(`${G}/control/station/${E}/launch`,{driver_id:m?.id,driver_name:m?.name,car:h?.car,track:h?.track,difficulty:L,transmission:K,time_of_day:B,weather:_,duration_minutes:y})},onSuccess:()=>ae(!0)});return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center animate-in zoom-in duration-300 max-w-4xl mx-auto w-full",children:[e.jsx("h2",{className:"text-4xl font-black text-white mb-6",children:"CONFIGURA TU SESIÓN"}),(()=>{const g=(u="")=>{const v=u.charCodeAt(0)||0;return{bhp:`${400+v%20*10} HP`,weight:`${1100+v%10*20} kg`,top_speed:`${260+v%15*5} km/h`}},x=k?.specs?.bhp?k.specs:g(k?.id),p=R?.map_url||"https://upload.wikimedia.org/wikipedia/commons/thumb/6/67/Circuit_de_Spa-Francorchamps_trace.svg/1200px-Circuit_de_Spa-Francorchamps_trace.svg.png";return e.jsxs("div",{className:"w-full grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-3xl p-6 flex flex-col relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-30 transition-opacity",children:e.jsx(et,{size:120})}),e.jsx("h4",{className:"text-gray-400 font-bold text-xs tracking-widest uppercase mb-4",children:"VEHÍCULO SELECCIONADO"}),e.jsx("div",{className:"text-2xl font-black text-white mb-1",children:k?.name||h?.car}),e.jsx("div",{className:"text-blue-400 font-bold text-sm mb-6",children:k?.brand||"Marca Desconocida"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-auto relative z-10",children:[e.jsxs("div",{className:"bg-black/30 rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-gray-500 text-[10px] font-bold uppercase",children:"Potencia"}),e.jsx("div",{className:"text-white font-black text-lg",children:x.bhp})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-gray-500 text-[10px] font-bold uppercase",children:"Peso"}),e.jsx("div",{className:"text-white font-black text-lg",children:x.weight})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-gray-500 text-[10px] font-bold uppercase",children:"Top Speed"}),e.jsx("div",{className:"text-white font-black text-lg",children:x.top_speed})]})]})]}),e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-3xl p-6 flex flex-col relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-400 font-bold text-xs tracking-widest uppercase mb-1",children:"CIRCUITO"}),e.jsx("div",{className:"text-xl font-black text-white",children:R?.name||h?.track})]}),e.jsxs("div",{className:"text-right w-full max-w-[50%]",children:[e.jsxs("div",{className:"text-yellow-500 font-bold text-xs uppercase flex items-center justify-end gap-1 mb-2",children:[e.jsx(me,{size:12})," Top Tiempos"]}),e.jsx("div",{className:"space-y-1",children:X.slice(0,3).map((u,v)=>e.jsxs("div",{className:"flex justify-between items-center text-xs gap-3",children:[e.jsxs("span",{className:`font-mono font-bold ${v===0?"text-yellow-400":"text-gray-400"}`,children:[v+1,". ",u.driver_name]}),e.jsx("span",{className:"font-mono text-white",children:u.time})]},v))})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center relative min-h-[120px] p-4",children:e.jsx("img",{src:p,className:"h-full w-auto object-contain opacity-80 drop-shadow-[0_0_10px_rgba(255,255,255,0.3)] filter invert",alt:"Track Map"})})]})]})})(),e.jsxs("div",{className:"w-full mb-8",children:[e.jsx("p",{className:"text-gray-400 font-bold mb-4 ml-2 uppercase text-sm tracking-widest",children:"CONDICIONES DE PISTA"}),e.jsxs("div",{className:"bg-gray-800/50 p-2 rounded-2xl grid grid-cols-4 gap-2",children:[e.jsxs("button",{onClick:()=>Q("noon"),className:`p-3 rounded-xl flex flex-col items-center gap-2 transition-all ${B==="noon"?"bg-yellow-500 text-black shadow-lg shadow-yellow-500/20":"hover:bg-gray-700 text-gray-400"}`,children:[e.jsx(gt,{size:20}),e.jsx("span",{className:"text-xs font-bold",children:"MEDIODÍA"})]}),e.jsxs("button",{onClick:()=>Q("evening"),className:`p-3 rounded-xl flex flex-col items-center gap-2 transition-all ${B==="evening"?"bg-orange-500 text-white shadow-lg shadow-orange-500/20":"hover:bg-gray-700 text-gray-400"}`,children:[e.jsx(Mt,{size:20}),e.jsx("span",{className:"text-xs font-bold",children:"ATARDECER"})]}),e.jsxs("button",{onClick:()=>M("cloud"),className:`p-3 rounded-xl flex flex-col items-center gap-2 transition-all ${_==="cloud"?"bg-gray-500 text-white shadow-lg":"hover:bg-gray-700 text-gray-400"}`,children:[e.jsx(jt,{size:20}),e.jsx("span",{className:"text-xs font-bold",children:"NUBLADO"})]}),e.jsxs("button",{onClick:()=>M("rain"),className:`p-3 rounded-xl flex flex-col items-center gap-2 transition-all ${_==="rain"?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"hover:bg-gray-700 text-gray-400"}`,children:[e.jsx(St,{size:20}),e.jsx("span",{className:"text-xs font-bold",children:"LLUVIA"})]})]})]}),e.jsxs("div",{className:"w-full mb-8",children:[e.jsx("p",{className:"text-gray-400 font-bold mb-4 ml-2 uppercase text-sm tracking-widest",children:"TRANSMISIÓN"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("button",{onClick:()=>se("automatic"),className:`p-6 rounded-2xl border-2 flex items-center justify-center gap-3 transition-all ${K==="automatic"?"bg-blue-600 border-blue-400 text-white shadow-lg shadow-blue-500/30":"bg-gray-800 border-gray-700 text-gray-400 hover:bg-gray-700"}`,children:[e.jsx(Re,{size:32}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-black text-xl",children:"AUTOMÁTICO"}),e.jsx("div",{className:"text-xs font-medium opacity-80",children:"Cambios automáticos"})]})]}),e.jsxs("button",{onClick:()=>se("manual"),className:`p-6 rounded-2xl border-2 flex items-center justify-center gap-3 transition-all ${K==="manual"?"bg-blue-600 border-blue-400 text-white shadow-lg shadow-blue-500/30":"bg-gray-800 border-gray-700 text-gray-400 hover:bg-gray-700"}`,children:[e.jsx(fe,{size:32}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-black text-xl",children:"MANUAL"}),e.jsx("div",{className:"text-xs font-medium opacity-80",children:"Levas o Palanca"})]})]})]})]}),e.jsxs("div",{className:"w-full mb-8",children:[e.jsx("p",{className:"text-gray-400 font-bold mb-4 ml-2 uppercase text-sm tracking-widest",children:"NIVEL DE AYUDAS"}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 w-full",children:[e.jsxs("button",{onClick:()=>Z("novice"),className:`p-8 rounded-3xl border-4 flex flex-col items-center gap-4 transition-all ${L==="novice"?"border-green-500 bg-green-500/20 scale-105 shadow-2xl shadow-green-500/20":"border-gray-700 bg-gray-800/50 hover:border-gray-600 hover:bg-gray-800"}`,children:[e.jsx(Xe,{size:64,className:L==="novice"?"text-green-400":"text-gray-500"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-black text-white",children:"NOVATO"}),e.jsxs("p",{className:"text-gray-400 mt-2",children:["ABS & TC Máximos",e.jsx("br",{}),"Control Estabilidad"]})]})]}),e.jsxs("button",{onClick:()=>Z("amateur"),className:`p-8 rounded-3xl border-4 flex flex-col items-center gap-4 transition-all ${L==="amateur"?"border-yellow-500 bg-yellow-500/20 scale-105 shadow-2xl shadow-yellow-500/20":"border-gray-700 bg-gray-800/50 hover:border-gray-600 hover:bg-gray-800"}`,children:[e.jsx(fe,{size:64,className:L==="amateur"?"text-yellow-400":"text-gray-500"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-black text-white",children:"AMATEUR"}),e.jsxs("p",{className:"text-gray-400 mt-2",children:["ABS & TC Fábrica",e.jsx("br",{}),"Daños Visuales"]})]})]}),e.jsxs("button",{onClick:()=>Z("pro"),className:`p-8 rounded-3xl border-4 flex flex-col items-center gap-4 transition-all ${L==="pro"?"border-red-500 bg-red-500/20 scale-105 shadow-2xl shadow-red-500/20":"border-gray-700 bg-gray-800/50 hover:border-gray-600 hover:bg-gray-800"}`,children:[e.jsx(me,{size:64,className:L==="pro"?"text-red-400":"text-gray-500"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-black text-white",children:"PRO"}),e.jsxs("p",{className:"text-gray-400 mt-2",children:["Sin Ayudas",e.jsx("br",{}),"Daños Reales 100%"]})]})]})]})]}),e.jsxs("div",{className:"w-full bg-gray-900/50 p-6 rounded-2xl border border-gray-800 flex items-center justify-center gap-4 mb-8",children:[e.jsx(Ce,{className:"text-blue-400"}),e.jsx("span",{className:"font-bold text-gray-300",children:"DURACIÓN SELECCIONADA:"}),e.jsxs("span",{className:"font-black text-2xl text-white",children:[y," Minutos"]})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("button",{onClick:()=>s.mutate(),disabled:s.isPending,className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-black text-3xl py-8 rounded-3xl shadow-2xl shadow-red-600/20 active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:[s.isPending?"INICIANDO...":"LANZAR SESIÓN"," ",e.jsx(wt,{fill:"currentColor",size:32})]}),e.jsxs("p",{className:"text-center text-gray-500 mt-4 text-sm",children:["Simulador #",E," • Al pulsar, el juego se iniciará automáticamente."]})]})]})},ne=()=>{const{data:s,refetch:g}=q({queryKey:["lobby",h?.lobbyId],queryFn:()=>V.get(`${G}/lobby/${h?.lobbyId}`).then(j=>j.data),refetchInterval:1e3,enabled:!!h?.isLobby&&!!h?.lobbyId}),x=Me({mutationFn:async()=>{await V.post(`${G}/lobby/${h?.lobbyId}/start`,{},{params:{requesting_station_id:E}})}}),p=Me({mutationFn:async j=>{await V.post(`${G}/lobby/${h?.lobbyId}/ready`,{},{params:{station_id:E,is_ready:j}}),g()}});r.useEffect(()=>{s?.status==="running"&&ae(!0)},[s?.status]);const u=E===s?.host_station_id,w=s?.players?.find(j=>j.station_id===E)?.ready||!1,[n,c]=r.useState(120);r.useEffect(()=>{if(!s?.created_at)return;const j=new Date(s.created_at).getTime(),re=new Date().getTime(),W=Math.floor((re-j)/1e3),he=Math.max(0,120-W);c(he),he===0&&u&&s.status==="waiting"&&!x.isPending&&(s.players?.length||0)>=2&&(console.log("Auto-starting race due to timeout..."),x.mutate())},[s?.created_at,s?.status,u,x]);const l=s?.players?.length>0&&s?.players?.every(j=>j.ready),I=j=>{const re=Math.floor(j/60),W=j%60;return`${re}:${W.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"h-full flex flex-col items-center p-8 animate-in zoom-in duration-300 max-w-6xl mx-auto w-full",children:[e.jsxs("div",{className:"w-full flex justify-between items-end mb-8 border-b border-gray-800 pb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"bg-purple-600 text-white px-4 py-1 rounded-full font-bold text-sm tracking-widest mb-4 inline-block animate-pulse",children:"SALA DE ESPERA"}),e.jsx("h2",{className:"text-5xl font-black text-white",children:s?.name||"Cargando..."}),e.jsxs("p",{className:"text-gray-400 mt-2 font-mono text-xl",children:[s?.track," | ",s?.car]})]}),e.jsxs("div",{className:"text-right flex flex-col items-end",children:[e.jsx("p",{className:"text-gray-500 font-bold uppercase tracking-widest mb-1",children:"INICIO AUTOMÁTICO EN"}),e.jsx("p",{className:`text-4xl font-black font-mono ${n<=10?"text-red-500 animate-pulse":"text-white"}`,children:I(n)}),e.jsx("p",{className:"text-sm font-bold text-blue-400 mt-2",children:s?.status?.toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full flex-1 overflow-y-auto mb-8",children:[s?.players?.map((j,re)=>{const W=j.station_id===E;return e.jsxs("div",{className:`p-6 rounded-2xl border-2 flex items-center justify-between ${W?"bg-blue-900/20 border-blue-500":"bg-gray-800/50 border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-black text-xl ${j.ready?"bg-green-500 text-black":"bg-gray-700 text-gray-400"}`,children:re+1}),e.jsxs("div",{children:[e.jsxs("p",{className:`font-bold text-xl ${W?"text-white":"text-gray-300"}`,children:[j.station_name," ",W&&"(YO)"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Slot ",j.slot]})]})]}),j.ready?e.jsxs("span",{className:"bg-green-500/20 text-green-400 px-4 py-2 rounded-lg font-bold border border-green-500/50 flex items-center gap-2",children:[e.jsx(Xe,{size:20})," LISTO"]}):e.jsxs("span",{className:"bg-gray-700/50 text-gray-500 px-4 py-2 rounded-lg font-bold border border-gray-600 flex items-center gap-2",children:[e.jsx(Ce,{size:20})," ESPERANDO"]})]},j.station_id)}),Array.from({length:Math.max(0,(s?.max_players||0)-(s?.players?.length||0))}).map((j,re)=>e.jsx("div",{className:"p-6 rounded-2xl border-2 border-gray-800 border-dashed flex items-center justify-center text-gray-700 font-bold",children:"ESPERANDO JUGADOR..."},`empty-${re}`))]}),e.jsxs("div",{className:"w-full flex gap-6 h-24",children:[e.jsx("button",{onClick:()=>p.mutate(!w),disabled:p.isPending,className:`flex-1 rounded-2xl font-black text-2xl transition-all shadow-xl flex items-center justify-center gap-4 ${w?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:w?"CANCELAR LISTO":"¡ESTOY LISTO!"}),u&&e.jsxs("button",{onClick:()=>x.mutate(),disabled:!l||x.isPending,className:`flex-1 rounded-2xl font-black text-2xl transition-all shadow-xl flex items-center justify-center gap-4 ${l?"bg-blue-600 hover:bg-blue-500 text-white animate-pulse":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:[x.isPending?"INICIANDO...":"INICIAR CARRERA",!l&&e.jsx("span",{className:"text-sm font-normal opacity-70 ml-2",children:"(Esperando a todos)"})]})]})]})};r.useEffect(()=>{if(!H)return;ye(y*60);const s=setInterval(()=>{ye(g=>g<=1?(clearInterval(s),ae(!1),i(6),0):g-1)},1e3);return()=>clearInterval(s)},[H,y]);const Ne=()=>{const s=Math.floor(le/60),g=le%60,x=le<60;return e.jsxs("div",{className:"h-full flex flex-col animate-in fade-in duration-500",children:[e.jsxs("div",{className:`text-center py-4 rounded-2xl mb-6 transition-colors ${x?"bg-red-500/20 animate-pulse":"bg-blue-500/10"}`,children:[e.jsxs("div",{className:`text-6xl font-numeric font-black ${x?"text-red-400":"text-blue-400"}`,children:[e.jsx(Ce,{className:"inline-block mr-3 -mt-2",size:48}),String(s).padStart(2,"0"),":",String(g).padStart(2,"0")]}),e.jsx("p",{className:`text-sm font-bold uppercase tracking-widest mt-1 ${x?"text-red-500":"text-gray-500"}`,children:x?"¡TIEMPO CASI AGOTADO!":"TIEMPO RESTANTE"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-gray-800 pb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:h?.track.toUpperCase()}),e.jsx("p",{className:"text-xl text-blue-400 font-bold",children:m?.name})]}),e.jsxs("button",{onClick:()=>{confirm("¿Finalizar sesión y volver al menú?")&&(ae(!1),i(1),f(null))},className:"bg-red-500/20 hover:bg-red-500 text-red-400 hover:text-white px-6 py-3 rounded-xl border border-red-500/50 font-bold flex items-center gap-2 transition-all",children:[e.jsx($e,{size:20})," SALIR"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 flex-1",children:[e.jsxs("div",{className:"bg-black/40 rounded-3xl border border-gray-800 p-8 flex items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-6xl font-numeric text-white mb-2",children:"1:45.302"}),e.jsx("p",{className:"text-green-400 font-bold text-xl uppercase tracking-widest",children:"Mejor Vuelta"})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-blue-500/10 to-transparent",children:e.jsx("svg",{className:"w-full h-full",preserveAspectRatio:"none",children:e.jsx("path",{d:"M0,100 C150,50 300,80 450,20 L450,150 L0,150 Z",fill:"rgba(59, 130, 246, 0.2)"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-400 mb-2",children:"INGENIERO DE PISTA"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{className:"bg-red-900/40 border-2 border-red-600/50 hover:bg-red-600 hover:text-white text-red-400 p-6 rounded-2xl font-black text-xl transition-all",children:"SOFT"}),e.jsx("button",{className:"bg-yellow-900/40 border-2 border-yellow-600/50 hover:bg-yellow-600 hover:text-white text-yellow-400 p-6 rounded-2xl font-black text-xl transition-all",children:"MEDIUM"}),e.jsx("button",{className:"bg-white/10 border-2 border-gray-500/50 hover:bg-gray-100 hover:text-black text-gray-300 p-6 rounded-2xl font-black text-xl transition-all",children:"HARD"}),e.jsx("button",{className:"bg-blue-900/40 border-2 border-blue-600/50 hover:bg-blue-600 hover:text-white text-blue-400 p-6 rounded-2xl font-black text-xl transition-all",children:"WET"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-400 mb-2",children:"COMBUSTIBLE"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"flex-1 bg-gray-800 hover:bg-gray-700 text-white font-bold py-4 rounded-xl border border-gray-700",children:"+ 10L"}),e.jsx("button",{className:"flex-1 bg-gray-800 hover:bg-gray-700 text-white font-bold py-4 rounded-xl border border-gray-700",children:"LLENAR"})]})]})]})]}),e.jsx("div",{className:"mt-8 border-t border-gray-800 pt-6",children:e.jsxs("button",{onClick:async()=>{if(confirm("¿Seguro que quieres CANCELAR la sesión? El juego se cerrará.")){try{await V.post(`${G}/control/station/${E}/panic`)}catch(p){console.error("Error sending panic:",p)}ae(!1),i(1),T(null),f(null)}},className:"w-full bg-red-600/20 hover:bg-red-600 border-2 border-red-600/50 text-red-400 hover:text-white font-black text-2xl py-6 rounded-2xl transition-all flex items-center justify-center gap-4",children:[e.jsx($e,{size:28}),"CANCELAR SESIÓN"]})})]})},ke=({lapId:s})=>{const{data:g,isLoading:x}=q({queryKey:["coach-analysis",s],queryFn:async()=>s?(await V.get(`${G}/telemetry/coach/${s}`)).data:null,enabled:!!s});if(x)return e.jsx("div",{className:"bg-gray-800/20 p-8 rounded-3xl border border-gray-700 animate-pulse text-center text-gray-400",children:"Analizando telemetría..."});if(!g||g.tips.length===0)return e.jsx("div",{className:"bg-gray-800/20 p-6 rounded-3xl border border-gray-700 text-center",children:e.jsx("p",{className:"text-gray-400 italic",children:"No hay suficientes datos para el análisis comparativo todavía."})});const p=g.ghost_telemetry.map((u,v)=>{const w=g.user_telemetry[v]||{};return{n:u.n,ghost:u.s,user:w.s}});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.tips.map((u,v)=>e.jsxs("div",{className:`p-4 rounded-2xl border flex gap-4 items-start ${u.severity==="high"?"bg-red-500/10 border-red-500/30":"bg-orange-500/10 border-orange-500/30"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${u.severity==="high"?"bg-red-500 text-white":"bg-orange-500 text-white"}`,children:u.type==="braking"?e.jsx(tt,{size:20}):u.type==="apex"?e.jsx(kt,{size:20}):e.jsx(tt,{size:20})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-white uppercase text-xs mb-1 tracking-wider",children:u.type==="braking"?"Punto de frenada":u.type==="apex"?"Velocidad en el vértice":"Tracción / Salida"}),e.jsx("p",{className:"text-sm text-gray-300 leading-tight",children:u.message})]})]},v))}),e.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-3xl border border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"text-white font-bold flex items-center gap-2",children:[e.jsx(fe,{size:18,className:"text-green-400"})," VELOCIDAD VS GHOST (",g.reference_driver_name,")"]}),e.jsxs("div",{className:"flex gap-4 text-xs font-bold",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})," TÚ"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})," GHOST"]})]})]}),e.jsx("div",{className:"h-48 w-full",children:e.jsx(He,{width:"100%",height:"100%",children:e.jsxs(We,{data:p,children:[e.jsx(Ye,{strokeDasharray:"3 3",stroke:"#374151",vertical:!1}),e.jsx(Je,{dataKey:"n",hide:!0}),e.jsx(Ze,{hide:!0,domain:["auto","auto"]}),e.jsx(Qe,{contentStyle:{backgroundColor:"#111827",border:"none",borderRadius:"8px"},itemStyle:{fontSize:"12px"}}),e.jsx(De,{type:"monotone",dataKey:"user",stroke:"#3b82f6",strokeWidth:2,dot:!1}),e.jsx(De,{type:"monotone",dataKey:"ghost",stroke:"#22c55e",strokeWidth:2,dot:!1,strokeDasharray:"5 5"})]})})})]})]})},de=()=>{const{data:s,isLoading:g}=q({queryKey:["recent-sessions",m?.name,h?.track],queryFn:async()=>(await new Promise(c=>setTimeout(c,2e3)),(await V.get(`${G}/telemetry/sessions`,{params:{driver_name:m?.name,track_name:h?.track,limit:1}})).data),refetchInterval:n=>{const c=n.state.data;if(!c||c.length===0)return 2e3;const l=new Date(c[0].date).getTime();return new Date().getTime()-l>6e5?2e3:!1}}),x=s?.[0],p=x&&new Date().getTime()-new Date(x.date).getTime()<900*1e3,{data:u}=q({queryKey:["driver-details",m?.name,h?.track],queryFn:()=>V.get(`${G}/telemetry/details/${h?.track}/${m?.name}`).then(n=>n.data),enabled:!!x}),v=u?.lap_history?.map((n,c)=>({lap:c+1,time:n/1e3}))||[],w=n=>{const c=Math.floor(n/6e4),l=(n%6e4/1e3).toFixed(3);return`${c}:${l.padStart(6,"0")}`};return g||!p?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center animate-pulse",children:[e.jsx(me,{size:80,className:"text-gray-600 mb-6"}),e.jsx("h2",{className:"text-4xl font-black text-white",children:"PROCESANDO RESULTADOS..."}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Recibiendo telemetría del coche..."})]}):e.jsxs("div",{className:"h-full flex flex-col p-8 animate-in zoom-in duration-500 max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-5xl font-black text-white italic tracking-tighter mb-2",children:"RESULTADOS DE SESIÓN"}),e.jsxs("p",{className:"text-xl text-gray-400",children:[x?.track_name," • ",x?.car_model]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 flex-1 min-h-0",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-3xl border border-gray-700 text-center",children:[e.jsx("div",{className:"text-gray-400 font-bold mb-2",children:"MEJOR VUELTA"}),e.jsx("div",{className:"text-6xl font-numeric text-white",children:w(x?.best_lap||0)})]}),e.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-3xl border border-gray-700 flex flex-col items-center",children:[e.jsx("h4",{className:"text-gray-400 font-bold mb-4",children:"CONSISTENCIA"}),e.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"80",cy:"80",r:"70",stroke:"#374151",strokeWidth:"12",fill:"none"}),e.jsx("circle",{cx:"80",cy:"80",r:"70",stroke:"#3b82f6",strokeWidth:"12",fill:"none",strokeDasharray:440,strokeDashoffset:440-440*(u?.consistency_score||0)/100,className:"transition-all duration-1000 ease-out"})]}),e.jsxs("span",{className:"absolute text-4xl font-bold text-white",children:[u?.consistency_score,"%"]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-gray-700 flex flex-col items-center shadow-2xl",children:[e.jsxs("h4",{className:"text-black font-black mb-4 flex items-center gap-2",children:[e.jsx(_t,{size:24})," PASAPORTE DIGITAL"]}),e.jsx("div",{className:"bg-white p-2 rounded-xl",children:e.jsx(bt,{value:`https://assetto-manager.app/passport/${x?.driver_name}`,size:150,level:"H"})}),e.jsx("p",{className:"text-black/60 text-sm mt-3 font-bold text-center",children:"ESCANEA PARA GUARDAR"})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-8 min-h-0 flex flex-col",children:[e.jsx(ke,{lapId:x?.best_lap_id}),e.jsxs("div",{className:"bg-gray-800/30 p-6 rounded-3xl border border-gray-700 flex flex-col flex-1",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(fe,{size:20,className:"text-blue-400"})," HISTORIAL DE VUELTAS"]}),e.jsx("div",{className:"flex-1 w-full min-h-[250px]",children:e.jsx(He,{width:"100%",height:"100%",children:e.jsxs(We,{data:v,children:[e.jsx(Ye,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(Je,{dataKey:"lap",stroke:"#9ca3af",label:{value:"Vuelta",position:"insideBottom",offset:-5}}),e.jsx(Ze,{domain:["auto","auto"],stroke:"#9ca3af",width:40}),e.jsx(Qe,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#9ca3af"}}),e.jsx(De,{type:"monotone",dataKey:"time",stroke:"#60a5fa",strokeWidth:3,dot:{r:4},activeDot:{r:8}})]})})})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("button",{onClick:()=>{i(1),ae(!1),T(null),f(null)},className:"bg-white text-black hover:bg-gray-200 px-12 py-4 rounded-2xl font-black text-xl shadow-lg transition-all flex items-center gap-3",children:[e.jsx($e,{size:24})," VOLVER AL MENÚ"]})})]})},ve=()=>{if(H)return e.jsx(Ne,{});switch(o){case 1:return e.jsx(oe,{});case 2:return e.jsx(J,{});case 3:return e.jsx(d,{});case 4:return e.jsx(P,{});case 5:return e.jsx(ne,{});case 6:return e.jsx(de,{});default:return e.jsx(oe,{})}};return e.jsxs("div",{className:"h-full w-full flex flex-col relative",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/95 to-gray-900/80 z-10"}),e.jsx("div",{className:"absolute inset-0 bg-[url('/bg-kiosk.jpg')] bg-cover bg-center opacity-30"})]}),e.jsxs("div",{className:"relative z-20 h-full flex flex-col p-8 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[!H&&o>1&&e.jsx("button",{onClick:()=>i(o-1),className:"bg-gray-800 hover:bg-gray-700 text-white p-3 rounded-full transition-all border border-gray-700 hover:border-gray-500",children:e.jsx(ft,{size:24})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"text-gray-600"}),e.jsxs("span",{className:"text-gray-600 font-bold text-sm tracking-widest",children:["AC MANAGER KIOSK v2.0 - ",b?.name||"Standard"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{title:A?.is_online?"Agente Online":"Agente Offline",className:`p-2 rounded-lg ${A?.is_online?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:e.jsx(fe,{size:20,className:A?.is_online?"animate-pulse":""})}),e.jsx("div",{title:"Volante",className:`p-2 rounded-lg ${A?.wheel_connected?"bg-green-500/10 text-green-500":"bg-gray-800 text-gray-600"}`,children:e.jsx(yt,{size:20,className:A?.wheel_connected?"animate-spin-slow":""})}),e.jsx("div",{title:"Pedales",className:`p-2 rounded-lg ${A?.pedals_connected?"bg-green-500/10 text-green-500":"bg-gray-800 text-gray-600"}`,children:e.jsx(Ct,{size:20})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase",children:"USUARIO"}),e.jsx("div",{className:"text-white font-bold",children:m?m.name:"Invitado"})]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col justify-center max-w-7xl mx-auto w-full",children:ve()})]})]})}export{wr as default};
