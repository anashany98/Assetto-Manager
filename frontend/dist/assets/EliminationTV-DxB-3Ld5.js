import{c as v,n as y,r as c,u as w,A as p,j as e,T as _,U as k,a as E}from"./index-MjGtIaAt.js";import{c as d}from"./utils-BykweIWy.js";import{Z as A}from"./zap-BctN5ITw.js";import{T as I}from"./timer-CamBLO3n.js";import{T}from"./triangle-alert-ko4KflD0.js";import"./clsx-B-dksMZM.js";const S=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],j=v("skull",S);function N(a){if(!a)return"--:--.---";const l=Math.floor(a/6e4),x=Math.floor(a%6e4/1e3),m=a%1e3;return`${l}:${x.toString().padStart(2,"0")}.${m.toString().padStart(3,"0")}`}function $(){const{id:a}=y(),[l,x]=c.useState(null),[m,o]=c.useState(!1),g=c.useRef(null),{data:t,refetch:h}=w({queryKey:["elimination-race",a],queryFn:async()=>(await E.get(`${p}/elimination/${a}/status`)).data,refetchInterval:2e3,enabled:!!a});if(c.useEffect(()=>{if(!a)return;const s=p.replace("http","ws"),r=new WebSocket(`${s}/elimination/${a}/ws`);return g.current=r,r.onmessage=b=>{const f=JSON.parse(b.data);f.eliminated&&(x(f.eliminated),o(!0),setTimeout(()=>o(!1),4e3)),h()},()=>r.close()},[a,h]),!t)return e.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-4xl font-black text-gray-600",children:"CARGANDO..."})});const i=t.participants.filter(s=>!s.is_eliminated),u=t.participants.filter(s=>s.is_eliminated),n=t.current_lap<=t.warmup_laps;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-black text-white overflow-hidden relative",children:[m&&l&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-red-900/90 animate-pulse",children:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{className:"w-32 h-32 mx-auto text-white mb-4 animate-bounce"}),e.jsx("div",{className:"text-6xl font-black uppercase tracking-wider animate-pulse",children:l}),e.jsx("div",{className:"text-3xl font-bold mt-4 text-red-200",children:"¬°ELIMINADO!"})]})}),t.status==="finished"&&i.length===1&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-yellow-500 via-amber-500 to-orange-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_,{className:"w-40 h-40 mx-auto text-white mb-6 animate-bounce"}),e.jsx("div",{className:"text-8xl font-black uppercase tracking-wider text-white drop-shadow-2xl",children:i[0].driver_name}),e.jsx("div",{className:"text-4xl font-bold mt-6 text-yellow-100",children:"üèÜ ¬°CAMPE√ìN! üèÜ"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-red-600 via-orange-500 to-red-600 p-6 shadow-2xl",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-5xl font-black uppercase tracking-tight flex items-center",children:[e.jsx(A,{className:"mr-4"}),t.name]}),e.jsx("p",{className:"text-xl font-bold text-red-100 mt-1",children:t.track_name||"MODO ELIMINACI√ìN"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-6xl font-black",children:["VUELTA ",t.current_lap]}),n?e.jsxs("div",{className:"text-2xl font-bold text-yellow-300 flex items-center justify-end mt-2",children:[e.jsx(I,{className:"mr-2"}),"CALENTAMIENTO (",t.current_lap,"/",t.warmup_laps,")"]}):e.jsxs("div",{className:"text-2xl font-bold text-red-200 flex items-center justify-end mt-2",children:[e.jsx(T,{className:"mr-2"}),"¬°ZONA DE ELIMINACI√ìN!"]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto p-8 grid grid-cols-3 gap-8",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(k,{className:"text-green-400 mr-3",size:32}),e.jsxs("h2",{className:"text-3xl font-black uppercase text-green-400",children:["En Carrera (",t.active_count,")"]})]}),e.jsx("div",{className:"space-y-4",children:i.map((s,r)=>e.jsx("div",{className:d("p-6 rounded-2xl border-2 transition-all duration-300",r===i.length-1&&!n?"bg-red-900/50 border-red-500 animate-pulse":r===0?"bg-green-900/30 border-green-500":"bg-gray-800/50 border-gray-700"),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:d("text-5xl font-black mr-6 w-16",r===0&&"text-green-400"),children:r+1}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-black uppercase",children:s.driver_name}),e.jsxs("div",{className:"text-lg text-gray-400",children:["Vueltas: ",s.laps_completed]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:d("text-4xl font-mono font-bold",r===i.length-1&&!n?"text-red-400":"text-white"),children:N(s.current_lap_time)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Mejor: ",N(s.best_lap_time)]})]}),r===i.length-1&&!n&&e.jsx("div",{className:"ml-6 px-4 py-2 bg-red-600 rounded-xl animate-pulse",children:e.jsx("span",{className:"text-xl font-black",children:"‚ö†Ô∏è PELIGRO"})})]})},s.driver_name))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(j,{className:"text-red-400 mr-3",size:32}),e.jsxs("h2",{className:"text-3xl font-black uppercase text-red-400",children:["Eliminados (",t.eliminated_count,")"]})]}),e.jsxs("div",{className:"space-y-3",children:[u.map(s=>e.jsx("div",{className:"p-4 rounded-xl bg-gray-900/80 border border-gray-800",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-gray-500 line-through",children:s.driver_name}),e.jsxs("div",{className:"text-sm text-red-400",children:["Vuelta ",s.eliminated_at_lap]})]}),e.jsxs("div",{className:"text-2xl font-black text-gray-600",children:["#",s.final_position]})]})},s.driver_name)),u.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-600",children:"Nadie eliminado a√∫n..."})]})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900/95 border-t border-gray-800 p-4",children:e.jsx("div",{className:"max-w-7xl mx-auto flex justify-center items-center space-x-8 text-xl",children:e.jsxs("span",{className:d("px-6 py-3 rounded-xl font-black uppercase",t.status==="waiting"&&"bg-yellow-600",t.status==="racing"&&"bg-green-600",t.status==="finished"&&"bg-purple-600"),children:[t.status==="waiting"&&"‚è≥ ESPERANDO",t.status==="racing"&&"üèÅ EN CARRERA",t.status==="finished"&&"üèÜ FINALIZADO"]})})})]})}export{$ as default};
